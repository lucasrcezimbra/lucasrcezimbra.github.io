<!doctype html><html lang=pt><head><title>Passaporte Dev Senior · Lucas Cezimbra
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Lucas Cezimbra"><meta name=description content="Curso

  Opensource
  
    
    Link to heading
  


pitch das ideas

cativar/sensibilizar os colegas a participar junto no projeto
é um processo de venda



Coisas erradas

não idealizar os mantenedores

essas pessoas são sucessos possíveis
todos esses caras começaram com um código simples


Overengineering

escopo grande sem ter tempo para executar
senão não coloca na rua


O valor de um projeto Opensource não é o problema q ele resolve e sim a quantidade de pessoas que usam o projeto Opensource


  Estratégias para aplicações Multi-Tenent
  
    
    Link to heading
  


https://github.com/henriquebastos/pds-multi-tenant/
Formas de isolamento

Diferentes instâncias

“single-tentant na nuvem”
economicamente é muito díficil fazer sentido
um codebase pra aplicar em várias instâncias
faz sentido se tiver uma discrepancia muito grande entre consumo de diferentes clientes


Mesma instância e diferentes databases

mais comum
pq em geral o programador não tem um grande conhecimento de banco de dados


Mesmo database e diferentes esquemas

muito especifico para bancos q suportam schemas: Postgres, Oracle, SQL Server&mldr;
quais bancos suportam?


Mesmo esquema mas com id de referência

segundo mais comum
simples, mas é muito fácil fazer merda e vazar os dados
com Django é fácil garantir que toda request pro ORM terá tenant_id




“Tem q ficar fácil. Você não pode fazer uma estratégia de multi-tenant e exigir que o estagiário lembre de colocar o tenant_id na query”
Sempre começo com a estratégia 4. É muito fácil fazer uma migração de tenant_id (estratégia 4) pra cada um ter um banco de dados
importante focar na estratégia de otimização do custo de infraestrutura
https://www.viget.com/articles/multi-tenancy-in-django/
ao invés de middleware do Django, também pode-se fazer outra aplicação WSGI para pegar o tenant, injetar na thread e depois chamar o Django

application = tenant_wsgi(get_wsgi_application())


o tenant tem q ser especifíco por thread, pode-se usar o threading.Local()
fazer um experimento com threading.Local
fazer experimento em usar o DATABASE_ROUTERS do Django

https://docs.djangoproject.com/en/4.0/ref/settings/#std:setting-DATABASE_ROUTERS
https://docs.djangoproject.com/en/4.0/topics/db/multi-db/
https://www.amvtek.com/blog/posts/2014/Jun/13/accessing-multiple-postgres-schemas-from-django/
https://stackoverflow.com/questions/65519069/django-routers-with-multiples-schema-in-database


Postgres row-level permission

https://www.postgresql.org/docs/current/ddl-rowsecurity.html
https://www.enterprisedb.com/postgres-tutorials/how-implement-column-and-row-level-security-postgresql


"><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:image content="https://cezimbra.me/images/lucas-180x180.jpg"><meta name=twitter:title content="Passaporte Dev Senior"><meta name=twitter:description content="Curso

  Opensource
  
    
    Link to heading
  


pitch das ideas

cativar/sensibilizar os colegas a participar junto no projeto
é um processo de venda



Coisas erradas

não idealizar os mantenedores

essas pessoas são sucessos possíveis
todos esses caras começaram com um código simples


Overengineering

escopo grande sem ter tempo para executar
senão não coloca na rua


O valor de um projeto Opensource não é o problema q ele resolve e sim a quantidade de pessoas que usam o projeto Opensource


  Estratégias para aplicações Multi-Tenent
  
    
    Link to heading
  


https://github.com/henriquebastos/pds-multi-tenant/
Formas de isolamento

Diferentes instâncias

“single-tentant na nuvem”
economicamente é muito díficil fazer sentido
um codebase pra aplicar em várias instâncias
faz sentido se tiver uma discrepancia muito grande entre consumo de diferentes clientes


Mesma instância e diferentes databases

mais comum
pq em geral o programador não tem um grande conhecimento de banco de dados


Mesmo database e diferentes esquemas

muito especifico para bancos q suportam schemas: Postgres, Oracle, SQL Server&mldr;
quais bancos suportam?


Mesmo esquema mas com id de referência

segundo mais comum
simples, mas é muito fácil fazer merda e vazar os dados
com Django é fácil garantir que toda request pro ORM terá tenant_id




“Tem q ficar fácil. Você não pode fazer uma estratégia de multi-tenant e exigir que o estagiário lembre de colocar o tenant_id na query”
Sempre começo com a estratégia 4. É muito fácil fazer uma migração de tenant_id (estratégia 4) pra cada um ter um banco de dados
importante focar na estratégia de otimização do custo de infraestrutura
https://www.viget.com/articles/multi-tenancy-in-django/
ao invés de middleware do Django, também pode-se fazer outra aplicação WSGI para pegar o tenant, injetar na thread e depois chamar o Django

application = tenant_wsgi(get_wsgi_application())


o tenant tem q ser especifíco por thread, pode-se usar o threading.Local()
fazer um experimento com threading.Local
fazer experimento em usar o DATABASE_ROUTERS do Django

https://docs.djangoproject.com/en/4.0/ref/settings/#std:setting-DATABASE_ROUTERS
https://docs.djangoproject.com/en/4.0/topics/db/multi-db/
https://www.amvtek.com/blog/posts/2014/Jun/13/accessing-multiple-postgres-schemas-from-django/
https://stackoverflow.com/questions/65519069/django-routers-with-multiples-schema-in-database


Postgres row-level permission

https://www.postgresql.org/docs/current/ddl-rowsecurity.html
https://www.enterprisedb.com/postgres-tutorials/how-implement-column-and-row-level-security-postgresql


"><meta name=twitter:site content="@lucasrcezimbra"><meta property="og:url" content="https://cezimbra.me/anotacoes/passaporte-dev-senior/"><meta property="og:site_name" content="Lucas Cezimbra"><meta property="og:title" content="Passaporte Dev Senior"><meta property="og:description" content="Curso
Opensource Link to heading pitch das ideas cativar/sensibilizar os colegas a participar junto no projeto é um processo de venda Coisas erradas
não idealizar os mantenedores essas pessoas são sucessos possíveis todos esses caras começaram com um código simples Overengineering escopo grande sem ter tempo para executar senão não coloca na rua O valor de um projeto Opensource não é o problema q ele resolve e sim a quantidade de pessoas que usam o projeto Opensource Estratégias para aplicações Multi-Tenent Link to heading https://github.com/henriquebastos/pds-multi-tenant/ Formas de isolamento Diferentes instâncias “single-tentant na nuvem” economicamente é muito díficil fazer sentido um codebase pra aplicar em várias instâncias faz sentido se tiver uma discrepancia muito grande entre consumo de diferentes clientes Mesma instância e diferentes databases mais comum pq em geral o programador não tem um grande conhecimento de banco de dados Mesmo database e diferentes esquemas muito especifico para bancos q suportam schemas: Postgres, Oracle, SQL Server… quais bancos suportam? Mesmo esquema mas com id de referência segundo mais comum simples, mas é muito fácil fazer merda e vazar os dados com Django é fácil garantir que toda request pro ORM terá tenant_id “Tem q ficar fácil. Você não pode fazer uma estratégia de multi-tenant e exigir que o estagiário lembre de colocar o tenant_id na query” Sempre começo com a estratégia 4. É muito fácil fazer uma migração de tenant_id (estratégia 4) pra cada um ter um banco de dados importante focar na estratégia de otimização do custo de infraestrutura https://www.viget.com/articles/multi-tenancy-in-django/ ao invés de middleware do Django, também pode-se fazer outra aplicação WSGI para pegar o tenant, injetar na thread e depois chamar o Django application = tenant_wsgi(get_wsgi_application()) o tenant tem q ser especifíco por thread, pode-se usar o threading.Local() fazer um experimento com threading.Local fazer experimento em usar o DATABASE_ROUTERS do Django https://docs.djangoproject.com/en/4.0/ref/settings/#std:setting-DATABASE_ROUTERS https://docs.djangoproject.com/en/4.0/topics/db/multi-db/ https://www.amvtek.com/blog/posts/2014/Jun/13/accessing-multiple-postgres-schemas-from-django/ https://stackoverflow.com/questions/65519069/django-routers-with-multiples-schema-in-database Postgres row-level permission https://www.postgresql.org/docs/current/ddl-rowsecurity.html https://www.enterprisedb.com/postgres-tutorials/how-implement-column-and-row-level-security-postgresql"><meta property="og:locale" content="pt"><meta property="og:type" content="article"><meta property="article:section" content="anotacoes"><meta property="article:published_time" content="2022-10-07T00:00:00+00:00"><meta property="article:modified_time" content="2024-02-27T00:00:00+00:00"><meta property="og:image" content="https://cezimbra.me/images/lucas-180x180.jpg"><link rel=canonical href=https://cezimbra.me/anotacoes/passaporte-dev-senior/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.aa5ef26fa979d6793724ae2dbd71efa94fd16cb1c5c7db3b6651f21f9892a5fd.css integrity="sha256-ql7yb6l51nk3JK4tvXHvqU/RbLHFx9s7ZlHyH5iSpf0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/contribution.min.cc4187dd6677d15a0c4438b74294dbe3f54269e14a831b267fb6f02a24f90d5d.css integrity="sha256-zEGH3WZ30VoMRDi3QpTb4/VCaeFKgxsmf7bwKiT5DV0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/custom.min.2ef373c2c125094d9302d8a924eba231d053340611b63bcf581460745cef626f.css integrity="sha256-LvNzwsElCU2TAtipJOuiMdBTNAYRtjvPWBRgdFzvYm8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/jquery.dataTables.min.min.8f6eae843117db9532d2c9b910f3b28834d22d85107ce9aba8b5abbeab67400a.css integrity="sha256-j26uhDEX25Uy0sm5EPOyiDTSLYUQfOmrqLWrvqtnQAo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/project.min.cc15fca9f603b853c828be903488d99afe86c71e40721cc4927e27f7453a4a36.css integrity="sha256-zBX8qfYDuFPIKL6QNIjZmv6Gxx5AchzEkn4n90U6SjY=" crossorigin=anonymous media=screen><link rel=stylesheet href=/timeline.min.801628785543d9e7f6deb109e9561a48da7823522c0986a7dd47be117447e62f.css integrity="sha256-gBYoeFVD2ef23rEJ6VYaSNp4I1IsCYan3Ue+EXRH5i8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/vis-timeline-graph2d.min.min.15aad78c7961c518a27d54923d04eea2b750b66ebea8f490d9fe599da0ae8928.css integrity="sha256-FarXjHlhxRiifVSSPQTuordQtm6+qPSQ2f5ZnaCuiSg=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/lucas-32x32.jpg sizes=32x32><link rel=icon type=image/png href=/images/lucas-16x16.jpg sizes=16x16><link rel=apple-touch-icon href=/images/lucas-180x180.jpg><link rel=apple-touch-icon sizes=180x180 href=/images/lucas-180x180.jpg><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body hx-boost=true class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cezimbra.me/>Lucas Cezimbra
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/sobre/>Sobre</a></li><li class=navigation-item><a class=navigation-link href=/projetos/>Projetos</a></li><li class=navigation-item><a class=navigation-link href=/anotacoes/indice/>Anotações</a></li><li class=navigation-item><a class=navigation-link href=/palestras/>Palestras</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=/en/>🇺🇸</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://cezimbra.me/anotacoes/passaporte-dev-senior/>Passaporte Dev Senior</a></h1></header><p><a href=https://henriquebastos.net/produtos/passaporte-dev-senior/ class=external-link target=_blank rel=noopener>Curso</a></p><h2 id=opensource>Opensource
<a class=heading-link href=#opensource><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>pitch das ideas<ul><li>cativar/sensibilizar os colegas a participar junto no projeto</li><li>é um processo de venda</li></ul></li></ul><p><strong>Coisas erradas</strong></p><ul><li>não idealizar os mantenedores<ul><li>essas pessoas são sucessos possíveis</li><li>todos esses caras começaram com um código simples</li></ul></li><li>Overengineering<ul><li>escopo grande sem ter tempo para executar</li><li>senão não coloca na rua</li></ul></li><li>O valor de um projeto Opensource não é o problema q ele resolve e sim a <strong>quantidade de pessoas</strong> que usam o projeto Opensource</li></ul><h2 id=estratégias-para-aplicações-multi-tenent>Estratégias para aplicações Multi-Tenent
<a class=heading-link href=#estrat%c3%a9gias-para-aplica%c3%a7%c3%b5es-multi-tenent><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://github.com/henriquebastos/pds-multi-tenant/ class=external-link target=_blank rel=noopener>https://github.com/henriquebastos/pds-multi-tenant/</a></li><li>Formas de isolamento<ol><li>Diferentes instâncias<ol><li>“single-tentant na nuvem”</li><li>economicamente é muito díficil fazer sentido</li><li>um codebase pra aplicar em várias instâncias</li><li>faz sentido se tiver uma discrepancia muito grande entre consumo de diferentes clientes</li></ol></li><li>Mesma instância e diferentes databases<ol><li>mais comum</li><li>pq em geral o programador não tem um grande conhecimento de banco de dados</li></ol></li><li>Mesmo database e diferentes esquemas<ol><li>muito especifico para bancos q suportam schemas: Postgres, Oracle, SQL Server&mldr;</li><li>quais bancos suportam?</li></ol></li><li>Mesmo esquema mas com id de referência<ol><li>segundo mais comum</li><li>simples, mas é muito fácil fazer merda e vazar os dados</li><li>com Django é fácil garantir que toda request pro ORM terá tenant_id</li></ol></li></ol></li><li>“Tem q ficar fácil. Você não pode fazer uma estratégia de multi-tenant e exigir que o estagiário lembre de colocar o tenant_id na query”</li><li>Sempre começo com a estratégia 4. É muito fácil fazer uma migração de tenant_id (estratégia 4) pra cada um ter um banco de dados</li><li>importante focar na estratégia de otimização do custo de infraestrutura</li><li><a href=https://www.viget.com/articles/multi-tenancy-in-django/ class=external-link target=_blank rel=noopener>https://www.viget.com/articles/multi-tenancy-in-django/</a></li><li>ao invés de middleware do Django, também pode-se fazer outra aplicação WSGI para pegar o tenant, injetar na thread e depois chamar o Django<ul><li><code>application = tenant_wsgi(get_wsgi_application())</code></li></ul></li><li>o tenant tem q ser especifíco por thread, pode-se usar o <a href=https://docs.python.org/3/library/threading.html#thread-local-data class=external-link target=_blank rel=noopener><code>threading.Local()</code></a></li><li>fazer um experimento com <a href=https://docs.python.org/3/library/threading.html#thread-local-data class=external-link target=_blank rel=noopener>threading.Local</a></li><li>fazer experimento em usar o DATABASE_ROUTERS do Django<ul><li><a href=https://docs.djangoproject.com/en/4.0/ref/settings/#std:setting-DATABASE_ROUTERS class=external-link target=_blank rel=noopener>https://docs.djangoproject.com/en/4.0/ref/settings/#std:setting-DATABASE_ROUTERS</a></li><li><a href=https://docs.djangoproject.com/en/4.0/topics/db/multi-db/ class=external-link target=_blank rel=noopener>https://docs.djangoproject.com/en/4.0/topics/db/multi-db/</a></li><li><a href=https://www.amvtek.com/blog/posts/2014/Jun/13/accessing-multiple-postgres-schemas-from-django/ class=external-link target=_blank rel=noopener>https://www.amvtek.com/blog/posts/2014/Jun/13/accessing-multiple-postgres-schemas-from-django/</a></li><li><a href=https://stackoverflow.com/questions/65519069/django-routers-with-multiples-schema-in-database class=external-link target=_blank rel=noopener>https://stackoverflow.com/questions/65519069/django-routers-with-multiples-schema-in-database</a></li></ul></li><li>Postgres row-level permission<ul><li><a href=https://www.postgresql.org/docs/current/ddl-rowsecurity.html class=external-link target=_blank rel=noopener>https://www.postgresql.org/docs/current/ddl-rowsecurity.html</a></li><li><a href=https://www.enterprisedb.com/postgres-tutorials/how-implement-column-and-row-level-security-postgresql class=external-link target=_blank rel=noopener>https://www.enterprisedb.com/postgres-tutorials/how-implement-column-and-row-level-security-postgresql</a></li></ul></li></ul></article></section></div><footer class=footer><section class=container>©
2024
Lucas Cezimbra
·
<a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script src=/js/htmx.min.c4fce4dc5cc9c8c3c9bf1aa788d54bb2cb25cd27114eb06551494ff61c30d6fb.js integrity="sha256-xPzk3FzJyMPJvxqniNVLssslzScRTrBlUUlP9hww1vs="></script><script src=/jquery-3.6.1.min.min.4833b7f001f63606fe402ea689716ace9d2a681e77e9396cda239bef25214def.js integrity="sha256-SDO38AH2Ngb+QC6miXFqzp0qaB536Tls2iOb7yUhTe8="></script><script src=/jquery.dataTables.min.min.81d3bc71314508a0b97e678aad65ff0b3312dcac9a1a7332273aba32a4802ae4.js integrity="sha256-gdO8cTFFCKC5fmeKrWX/CzMS3KyaGnMyJzq6MqSAKuQ="></script><script src=/vis-timeline-graph2d.min.min.99a125b8efb22795d0bc239c1e3183f23c76fc418a2d2492944b58e3756bf5af.js integrity="sha256-maEluO+yJ5XQvCOcHjGD8jx2/EGKLSSSlEtY43Vr9a8="></script><script data-goatcounter=https://cezimbra.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>