<!doctype html><html lang=pt><head><title>Python · Lucas Cezimbra</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Lucas Cezimbra"><meta name=description content="
  Enable isinstance without inherance
  
    
    Link to heading
  

from abc import ABC, abstractmethod


def save(obj):
    pass


class MyClass:
    save = save


class SalvableModel(ABC):
    @abstractmethod
    def save(self, **overwrites):
        pass

    @classmethod
    def __subclasshook__(cls, subclass):
        return (hasattr(subclass, 'save') and callable(subclass.save))


isinstance(MyClass(), SalvableModel)
# True

  Unpackaging a wheel
  
    
    Link to heading
  

from zipfile import ZipFile

with ZipFile('<path.whl>', 'r') as zf:
    zf.extractall('<path-to-extract>')

  Printing a tree
  
    
    Link to heading
  

Tweet"><meta name=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://cezimbra.me/images/lucas-180x180.jpg"><meta name=twitter:title content="Python"><meta name=twitter:description content="Enable isinstance without inherance Link to heading from abc import ABC, abstractmethod def save(obj): pass class MyClass: save = save class SalvableModel(ABC): @abstractmethod def save(self, **overwrites): pass @classmethod def __subclasshook__(cls, subclass): return (hasattr(subclass, 'save') and callable(subclass.save)) isinstance(MyClass(), SalvableModel) # True Unpackaging a wheel Link to heading from zipfile import ZipFile with ZipFile('<path.whl>', 'r') as zf: zf.extractall('<path-to-extract>') Printing a tree Link to heading Tweet"><meta property="og:url" content="https://cezimbra.me/anotacoes/python/"><meta property="og:site_name" content="Lucas Cezimbra"><meta property="og:title" content="Python"><meta property="og:description" content="Enable isinstance without inherance Link to heading from abc import ABC, abstractmethod def save(obj): pass class MyClass: save = save class SalvableModel(ABC): @abstractmethod def save(self, **overwrites): pass @classmethod def __subclasshook__(cls, subclass): return (hasattr(subclass, 'save') and callable(subclass.save)) isinstance(MyClass(), SalvableModel) # True Unpackaging a wheel Link to heading from zipfile import ZipFile with ZipFile('<path.whl>', 'r') as zf: zf.extractall('<path-to-extract>') Printing a tree Link to heading Tweet"><meta property="og:locale" content="pt"><meta property="og:type" content="article"><meta property="article:section" content="anotacoes"><meta property="article:published_time" content="2023-08-15T00:00:00+00:00"><meta property="article:modified_time" content="2025-03-14T00:00:00+00:00"><meta property="og:image" content="https://cezimbra.me/images/lucas-180x180.jpg"><link rel=canonical href=https://cezimbra.me/anotacoes/python/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.7763f8bc6341ecf82378e867c285e1549abb063a899be313ccd25dbfcd24fa7d.css integrity="sha256-d2P4vGNB7PgjeOhnwoXhVJq7BjqJm+MTzNJdv80k+n0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/contribution.min.cc4187dd6677d15a0c4438b74294dbe3f54269e14a831b267fb6f02a24f90d5d.css integrity="sha256-zEGH3WZ30VoMRDi3QpTb4/VCaeFKgxsmf7bwKiT5DV0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/custom.min.2ef373c2c125094d9302d8a924eba231d053340611b63bcf581460745cef626f.css integrity="sha256-LvNzwsElCU2TAtipJOuiMdBTNAYRtjvPWBRgdFzvYm8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/jquery.dataTables.min.min.8f6eae843117db9532d2c9b910f3b28834d22d85107ce9aba8b5abbeab67400a.css integrity="sha256-j26uhDEX25Uy0sm5EPOyiDTSLYUQfOmrqLWrvqtnQAo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/project.min.cc15fca9f603b853c828be903488d99afe86c71e40721cc4927e27f7453a4a36.css integrity="sha256-zBX8qfYDuFPIKL6QNIjZmv6Gxx5AchzEkn4n90U6SjY=" crossorigin=anonymous media=screen><link rel=stylesheet href=/timeline.min.801628785543d9e7f6deb109e9561a48da7823522c0986a7dd47be117447e62f.css integrity="sha256-gBYoeFVD2ef23rEJ6VYaSNp4I1IsCYan3Ue+EXRH5i8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/vis-timeline-graph2d.min.min.15aad78c7961c518a27d54923d04eea2b750b66ebea8f490d9fe599da0ae8928.css integrity="sha256-FarXjHlhxRiifVSSPQTuordQtm6+qPSQ2f5ZnaCuiSg=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/lucas-32x32.jpg sizes=32x32><link rel=icon type=image/png href=/images/lucas-16x16.jpg sizes=16x16><link rel=apple-touch-icon href=/images/lucas-180x180.jpg><link rel=apple-touch-icon sizes=180x180 href=/images/lucas-180x180.jpg><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body hx-boost=true class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cezimbra.me/>Lucas Cezimbra
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/sobre/>Sobre</a></li><li class=navigation-item><a class=navigation-link href=/projetos/>Projetos</a></li><li class=navigation-item><a class=navigation-link href=/anotacoes/indice/>Anotações</a></li><li class=navigation-item><a class=navigation-link href=/palestras/>Palestras</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://toolbox.cezimbra.me/>Toolbox ↗</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=/en/>🇺🇸</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://cezimbra.me/anotacoes/python/>Python</a></h1></header><h2 id=enable-isinstance-without-inherance>Enable <code>isinstance</code> without inherance
<a class=heading-link href=#enable-isinstance-without-inherance><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>from</span> abc <span style=color:#cd00cd>import</span> ABC, abstractmethod
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> save(obj):
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>class</span> <span style=color:#00cdcd>MyClass</span>:
</span></span><span style=display:flex><span>    save <span style=color:#39c>=</span> save
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>class</span> <span style=color:#00cdcd>SalvableModel</span>(ABC):
</span></span><span style=display:flex><span>    @abstractmethod
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>def</span> save(<span style=color:#cd00cd>self</span>, <span style=color:#39c>**</span>overwrites):
</span></span><span style=display:flex><span>        <span style=color:#cdcd00>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @classmethod
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>def</span> __subclasshook__(<span style=color:#cd00cd>cls</span>, subclass):
</span></span><span style=display:flex><span>        <span style=color:#cdcd00>return</span> (<span style=color:#cd00cd>hasattr</span>(subclass, <span style=color:#cd0000>&#39;save&#39;</span>) <span style=color:#cdcd00>and</span> callable(subclass<span style=color:#39c>.</span>save))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cd00cd>isinstance</span>(MyClass(), SalvableModel)
</span></span><span style=display:flex><span><span style=color:navy># True</span>
</span></span></code></pre></div><h2 id=unpackaging-a-wheel>Unpackaging a wheel
<a class=heading-link href=#unpackaging-a-wheel><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>from</span> zipfile <span style=color:#cd00cd>import</span> ZipFile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>with</span> ZipFile(<span style=color:#cd0000>&#39;&lt;path.whl&gt;&#39;</span>, <span style=color:#cd0000>&#39;r&#39;</span>) <span style=color:#cdcd00>as</span> zf:
</span></span><span style=display:flex><span>    zf<span style=color:#39c>.</span>extractall(<span style=color:#cd0000>&#39;&lt;path-to-extract&gt;&#39;</span>)
</span></span></code></pre></div><h2 id=printing-a-tree>Printing a tree
<a class=heading-link href=#printing-a-tree><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1711423408909803716 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cdcd00>def</span> print_tree(tree, indent<span style=color:#39c>=</span><span style=color:#cd00cd>2</span>, level<span style=color:#39c>=</span><span style=color:#cd00cd>0</span>):
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>for</span> name, child <span style=color:#cdcd00>in</span> tree<span style=color:#39c>.</span>items():
</span></span><span style=display:flex><span>        <span style=color:#cd00cd>print</span>(<span style=color:#cd0000>&#39; &#39;</span><span style=color:#39c>*</span>indent<span style=color:#39c>*</span>level <span style=color:#39c>+</span> name)
</span></span><span style=display:flex><span>        print_tree(child, indent, level<span style=color:#39c>+</span><span style=color:#cd00cd>1</span>)
</span></span></code></pre></div><h2 id=extracting-args-names-from-a-function>Extracting args names from a function
<a class=heading-link href=#extracting-args-names-from-a-function><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>import</span> inspect
</span></span><span style=display:flex><span>inspect<span style=color:#39c>.</span>getfullargspec(<span style=color:#39c>&lt;</span>func<span style=color:#39c>&gt;</span>)<span style=color:#39c>.</span>args
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cd00cd>import</span> inspect
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>2</span>]: <span style=color:#cdcd00>def</span> f(x,y):
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:     <span style=color:#cdcd00>pass</span>
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>3</span>]: inspect<span style=color:#39c>.</span>getfullargspec(f)<span style=color:#39c>.</span>args
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>3</span>]: [<span style=color:#cd0000>&#39;x&#39;</span>, <span style=color:#cd0000>&#39;y&#39;</span>]
</span></span></code></pre></div><h2 id=why-avoid-initing-decimal-from-float>Why avoid initing Decimal from float
<a class=heading-link href=#why-avoid-initing-decimal-from-float><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1696892876116914633 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cd00cd>from</span> decimal <span style=color:#cd00cd>import</span> Decimal
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>2</span>]: Decimal(<span style=color:#cd00cd>0.1</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>2</span>]: Decimal(<span style=color:#cd0000>&#39;0.1000000000000000055511151231257827021181583404541015625&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>3</span>]: Decimal(<span style=color:#cd0000>&#39;0.1&#39;</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>3</span>]: Decimal(<span style=color:#cd0000>&#39;0.1&#39;</span>)
</span></span></code></pre></div><h2 id=why-avoid-using-mutable-objects-as-default-args>Why avoid using mutable objects as default args
<a class=heading-link href=#why-avoid-using-mutable-objects-as-default-args><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1697723506727715020 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cdcd00>def</span> f(k, v, d<span style=color:#39c>=</span>{}):
</span></span><span style=display:flex><span>   <span style=color:#39c>...</span>:    d[k] <span style=color:#39c>=</span> v
</span></span><span style=display:flex><span>   <span style=color:#39c>...</span>:    <span style=color:#cdcd00>return</span> d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>2</span>]: f(<span style=color:#cd0000>&#34;x&#34;</span>, <span style=color:#cd00cd>1</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>2</span>]: {<span style=color:#cd0000>&#39;x&#39;</span>: <span style=color:#cd00cd>1</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>3</span>]: f(<span style=color:#cd0000>&#34;y&#34;</span>, <span style=color:#cd00cd>2</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>3</span>]: {<span style=color:#cd0000>&#39;x&#39;</span>: <span style=color:#cd00cd>1</span>, <span style=color:#cd0000>&#39;y&#39;</span>: <span style=color:#cd00cd>2</span>}
</span></span></code></pre></div><h2 id=merging-pdfs>Merging PDFs
<a class=heading-link href=#merging-pdfs><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1712582240943968477 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>from</span> pypdf <span style=color:#cd00cd>import</span> PdfWriter
</span></span><span style=display:flex><span>w <span style=color:#39c>=</span> PdfWriter()
</span></span><span style=display:flex><span>w<span style=color:#39c>.</span>append(<span style=color:#cd0000>&#34;first.pdf&#34;</span>)
</span></span><span style=display:flex><span>w<span style=color:#39c>.</span>append(<span style=color:#cd0000>&#34;second.pdf&#34;</span>)
</span></span><span style=display:flex><span>w<span style=color:#39c>.</span>write(<span style=color:#cd0000>&#34;merged.pdf&#34;</span>)
</span></span><span style=display:flex><span>w<span style=color:#39c>.</span>close()
</span></span></code></pre></div><h2 id=updating-list-in-place>Updating list in-place
<a class=heading-link href=#updating-list-in-place><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1726580798025797887 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>l2 <span style=color:#39c>=</span> l1 <span style=color:#39c>=</span> [<span style=color:#cd00cd>1</span>, <span style=color:#cd00cd>2</span>]
</span></span><span style=display:flex><span>l2[:] <span style=color:#39c>=</span> [<span style=color:#cd0000>&#39;a&#39;</span>, <span style=color:#cd0000>&#39;b&#39;</span>]
</span></span><span style=display:flex><span><span style=color:#cd00cd>print</span>(l1 <span style=color:#cdcd00>is</span> l2, l1, l2)
</span></span><span style=display:flex><span><span style=color:navy># True [&#39;a&#39;, &#39;b&#39;] [&#39;a&#39;, &#39;b&#39;]</span>
</span></span></code></pre></div><h2 id=moving-from-pip-to-poetry>Moving from pip to Poetry
<a class=heading-link href=#moving-from-pip-to-poetry><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1696637161993326741 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>poetry init
</span></span><span style=display:flex><span>cat requirements.txt | cut -d <span style=color:#cd0000>&#39;=&#39;</span> -f <span style=color:#cd00cd>1</span> | xargs poetry add
</span></span><span style=display:flex><span>cat requirements-dev.txt | cut -d <span style=color:#cd0000>&#39;=&#39;</span> -f <span style=color:#cd00cd>1</span> | xargs poetry add --group<span style=color:#39c>=</span>dev
</span></span><span style=display:flex><span>rm requirements.txt requirements-dev.txt
</span></span><span style=display:flex><span>poetry install
</span></span><span style=display:flex><span>poetry run &lt;command&gt;
</span></span></code></pre></div><h2 id=installing-requirements-from-git--ssh>Installing requirements from git + ssh
<a class=heading-link href=#installing-requirements-from-git--ssh><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip install git+ssh://git@github.com/&lt;org&gt;/&lt;repo&gt;
</span></span></code></pre></div><h2 id=spliting-cli-args-as-string>Spliting CLI args as string
<a class=heading-link href=#spliting-cli-args-as-string><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1790034271727493258 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#39c>&gt;&gt;&gt;</span> <span style=color:#cd0000>&#34;--system &#39;string w/ multiple words&#39;&#34;</span><span style=color:#39c>.</span>split()
</span></span><span style=display:flex><span>[<span style=color:#cd0000>&#39;--system&#39;</span>, <span style=color:#cd0000>&#34;&#39;string&#34;</span>, <span style=color:#cd0000>&#39;w/&#39;</span>, <span style=color:#cd0000>&#39;multiple&#39;</span>, <span style=color:#cd0000>&#34;words&#39;&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#39c>&gt;&gt;&gt;</span> <span style=color:#cd00cd>import</span> shlex
</span></span><span style=display:flex><span><span style=color:#39c>&gt;&gt;&gt;</span> shlex<span style=color:#39c>.</span>split(<span style=color:#cd0000>&#34;--system &#39;string w/ multiple words&#39;&#34;</span>)
</span></span><span style=display:flex><span>[<span style=color:#cd0000>&#39;--system&#39;</span>, <span style=color:#cd0000>&#39;string w/ multiple words&#39;</span>]
</span></span></code></pre></div><h2 id=sending-arguments-into-a-generator>Sending arguments into a generator
<a class=heading-link href=#sending-arguments-into-a-generator><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cdcd00>def</span> generator():
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:     <span style=color:#cdcd00>while</span> <span style=color:#cdcd00>True</span>:
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:         received <span style=color:#39c>=</span> <span style=color:#cdcd00>yield</span> <span style=color:#cd0000>&#39;DATA&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:         <span style=color:#cd00cd>print</span>(<span style=color:#cd0000>&#39;Received:&#39;</span>, received)
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>2</span>]: g <span style=color:#39c>=</span> generator()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>3</span>]: <span style=color:#cd00cd>next</span>(g)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>3</span>]: <span style=color:#cd0000>&#39;DATA&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>4</span>]: g<span style=color:#39c>.</span>send(<span style=color:#cd00cd>1</span>)
</span></span><span style=display:flex><span>Received: <span style=color:#cd00cd>1</span>
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>4</span>]: <span style=color:#cd0000>&#39;DATA&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>5</span>]: g<span style=color:#39c>.</span>send(<span style=color:#cd00cd>2</span>)
</span></span><span style=display:flex><span>Received: <span style=color:#cd00cd>2</span>
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>5</span>]: <span style=color:#cd0000>&#39;DATA&#39;</span>
</span></span></code></pre></div><h2 id=printing-logs-when-running-pytest>Printing logs when running pytest
<a class=heading-link href=#printing-logs-when-running-pytest><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1705183510837747905 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pytest --log-cli-level DEBUG
</span></span></code></pre></div><h2 id=why-to-fixtures-instead-of-namespace-variables-for-mocked-data>Why to fixtures instead of namespace variables for mocked data
<a class=heading-link href=#why-to-fixtures-instead-of-namespace-variables-for-mocked-data><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1704810879169024089 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:navy># without fixture</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MOCK_DATA <span style=color:#39c>=</span> [{<span style=color:#cd0000>&#34;field&#34;</span>: <span style=color:#cd0000>&#34;value&#34;</span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> test_one():
</span></span><span style=display:flex><span>    MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>=</span> <span style=color:#cd0000>&#39;other value&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>assert</span> MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;other value&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> test_two():
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>assert</span> MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;value&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># with fixture</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@pytest.fixture
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> mock_data():
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>return</span> [{<span style=color:#cd0000>&#34;field&#34;</span>: <span style=color:#cd0000>&#34;value&#34;</span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> test_three(mock_data):
</span></span><span style=display:flex><span>    mock_data[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>=</span> <span style=color:#cd0000>&#39;other value&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>assert</span> MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;other value&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> test_four(mock_data):
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>assert</span> mock_data[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;value&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#cdcd00>def</span> test_two():
</span></span><span style=display:flex><span><span style=color:#39c>&gt;</span>       <span style=color:#cdcd00>assert</span> MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;value&#39;</span>
</span></span><span style=display:flex><span>E       <span style=color:#669;font-weight:700>AssertionError</span>: <span style=color:#cdcd00>assert</span> <span style=color:#cd0000>&#39;other value&#39;</span> <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;value&#39;</span>
</span></span><span style=display:flex><span>E         <span style=color:#39c>-</span> value
</span></span><span style=display:flex><span>E         <span style=color:#39c>+</span> other value
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>path<span style=color:#39c>/</span>to<span style=color:#39c>/</span>tests<span style=color:#39c>/</span>test_zero<span style=color:#39c>.</span>py:<span style=color:#cd00cd>15</span>: <span style=color:#669;font-weight:700>AssertionError</span>
</span></span><span style=display:flex><span><span style=color:#39c>=====================&lt;</span>mark<span style=color:#39c>&gt;</span> <span style=color:#cd00cd>1</span> failed, <span style=color:#cd00cd>3</span> passed <span style=color:#cdcd00>in</span> <span style=color:#cd00cd>0.18</span>s <span style=color:#39c>&lt;/</span>mark<span style=color:#39c>&gt;=====================</span>
</span></span></code></pre></div><h2 id=why-to-use-spec-when-using-mocks>Why to use spec when using mocks?
<a class=heading-link href=#why-to-use-spec-when-using-mocks><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1713876531754201433 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>from</span> unittest.mock <span style=color:#cd00cd>import</span> Mock
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>class</span> <span style=color:#00cdcd>MyClass</span>:
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># without spec</span>
</span></span><span style=display:flex><span>Mock()<span style=color:#39c>.</span>wrong_method()
</span></span><span style=display:flex><span><span style=color:navy># Out: &lt;Mock name=&#39;mock.wrong_method()&#39; id=&#39;140607049530000&#39;&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># with spec</span>
</span></span><span style=display:flex><span>Mock(spec<span style=color:#39c>=</span>MyClass)<span style=color:#39c>.</span>wrong_method()
</span></span><span style=display:flex><span><span style=color:navy># raises &#34;AttributeError: Mock object has no attribute &#39;wrong_method&#39;&#34;</span>
</span></span></code></pre></div><h2 id=why-to-use-autospec-when-using-mocks>Why to use autospec when using mocks?
<a class=heading-link href=#why-to-use-autospec-when-using-mocks><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://twitter.com/lucasrcezimbra/status/1714230538305692145 class=external-link target=_blank rel=noopener>Tweet</a></p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>from</span> unittest.mock <span style=color:#cd00cd>import</span> create_autospec, Mock
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>class</span> <span style=color:#00cdcd>MyClass</span>:
</span></span><span style=display:flex><span>    myobj <span style=color:#39c>=</span> <span style=color:#cd00cd>object</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># without autospec</span>
</span></span><span style=display:flex><span>Mock(spec<span style=color:#39c>=</span>MyClass)<span style=color:#39c>.</span>myobj<span style=color:#39c>.</span>wrong_method()
</span></span><span style=display:flex><span><span style=color:navy># Out: &lt;Mock name=&#39;mock.myobj.wrong_method()&#39; id=&#39;140671042320272&#39;&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># with autospec</span>
</span></span><span style=display:flex><span>create_autospec(MyClass)<span style=color:#39c>.</span>myobj<span style=color:#39c>.</span>wrong_method()
</span></span><span style=display:flex><span><span style=color:navy># raises &#34;AttributeError: Mock object has no attribute &#39;wrong_method&#39;&#34;</span>
</span></span></code></pre></div><h2 id=anti-patterns>Anti-Patterns
<a class=heading-link href=#anti-patterns><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://docs.quantifiedcode.com/python-anti-patterns/ class=external-link target=_blank rel=noopener>The Little Book of Python Anti-Patterns</a></li></ul><h2 id=auth>Auth
<a class=heading-link href=#auth><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://authlib.org/ class=external-link target=_blank rel=noopener>Authlib</a> - The ultimate library in building OAuth and OpenID Connect servers</li></ul><h2 id=data>Data
<a class=heading-link href=#data><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h3 id=pandas>pandas
<a class=heading-link href=#pandas><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://www.pola.rs/ class=external-link target=_blank rel=noopener>https://www.pola.rs/</a> - Lightning-fast DataFrame library for Rust and Python</li><li>axios: 0=linha e 1=coluna</li><li>pandas-profilling - <a href=https://pypi.org/project/pandas-profiling/ class=external-link target=_blank rel=noopener>PyPI</a>, <a href=https://pandas-profiling.ydata.ai/docs/master/index.html class=external-link target=_blank rel=noopener>docs</a></li><li>Geral<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#39c>.</span>shape  <span style=color:navy># (linhas, colunas)</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>info()
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>High<span style=color:#39c>.</span>mean()  <span style=color:navy># média da coluna High</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>Date <span style=color:#39c>=</span> pd<span style=color:#39c>.</span>to_datetime(df<span style=color:#39c>.</span>Date)  <span style=color:navy># convert column to datetime</span>
</span></span></code></pre></div></li><li>Informações Estatísticas<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#39c>.</span>describe()  <span style=color:navy># informações estatísticas</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>ride_duration<span style=color:#39c>.</span>std()  <span style=color:navy># desvio padrão da coluna ride_duration</span>
</span></span></code></pre></div></li><li>Visualização<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#39c>.</span>High<span style=color:#39c>.</span>plot()  <span style=color:navy># gráfico da coluna High</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>Volume<span style=color:#39c>.</span>hist()  <span style=color:navy># histograma da coluna Volume</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>plot<span style=color:#39c>.</span>scatter(<span style=color:#cd0000>&#39;c1&#39;</span>, <span style=color:#cd0000>&#39;c2&#39;</span>)  <span style=color:navy># gráfico de dispersão</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>Low<span style=color:#39c>.</span>plot(kind<span style=color:#39c>=</span><span style=color:#cd0000>&#39;box&#39;</span>)  <span style=color:navy># gráfico boxplot</span>
</span></span></code></pre></div></li><li>Valores ausentes<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#39c>.</span>isnull()<span style=color:#39c>.</span>sum()  <span style=color:navy># conta o número de linhas com NaN</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>isnull()<span style=color:#39c>.</span>sum() <span style=color:#39c>/</span> df<span style=color:#39c>.</span>shape[<span style=color:#cd00cd>0</span>] <span style=color:navy># % de valores ausentes</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>dropna(subset<span style=color:#39c>=</span>[<span style=color:#cd0000>&#39;user_gender&#39;</span>], axios<span style=color:#39c>=</span><span style=color:#cd00cd>0</span>)  <span style=color:navy># apaga as linhas com valor NaNs da coluna user_gender</span>
</span></span></code></pre></div></li></ul><h2 id=dataclasses>Dataclasses
<a class=heading-link href=#dataclasses><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>attrs vs pydantic: <a href=https://threeofwands.com/why-i-use-attrs-instead-of-pydantic/ class=external-link target=_blank rel=noopener>Why I use attrs instead of pydantic</a></li><li><a href=https://github.com/dry-python/classes class=external-link target=_blank rel=noopener>dry-python/classes: Smart, pythonic, ad-hoc, typed polymorphism for Python</a></li></ul><h2 id=strings>Strings
<a class=heading-link href=#strings><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h3 id=formatting>Formatting
<a class=heading-link href=#formatting><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><h4 id=-operator-tweet><code>%</code> operator (<a href=https://twitter.com/lucasrcezimbra/status/1704086552274424259 class=external-link target=_blank rel=noopener>Tweet</a>)
<a class=heading-link href=#-operator-tweet><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><code>%s</code>: String conversion.</li><li><code>%d</code> or <code>%i</code>: Integer conversion.</li><li><code>%f</code>: Float conversion.</li><li><code>%o</code>: Octal conversion.</li><li><code>%x</code> or <code>%X</code>: Hexadecimal conversion.</li><li><code>%e</code> or <code>%E</code>: Exponential notation conversion.</li></ul><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cd0000>&#34;</span><span style=color:#cd0000>%s</span><span style=color:#cd0000> </span><span style=color:#cd0000>%d</span><span style=color:#cd0000> </span><span style=color:#cd0000>%f</span><span style=color:#cd0000> </span><span style=color:#cd0000>%o</span><span style=color:#cd0000> </span><span style=color:#cd0000>%x</span><span style=color:#cd0000> </span><span style=color:#cd0000>%e</span><span style=color:#cd0000>&#34;</span> <span style=color:#39c>%</span> (<span style=color:#cd0000>&#34;a&#34;</span>, <span style=color:#cd00cd>1</span>, <span style=color:#cd00cd>1.0</span>, <span style=color:#cd00cd>8</span>, <span style=color:#cd00cd>16</span>, <span style=color:#cd00cd>100</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>1</span>]: <span style=color:#cd0000>&#39;a 1 1.000000 10 10 1.000000e+02&#39;</span>
</span></span></code></pre></div><h3 id=f-string>f-string
<a class=heading-link href=#f-string><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Fonte: <a href=https://fstring.help/ class=external-link target=_blank rel=noopener>https://fstring.help/</a></p><ul><li>debugging (<a href=https://twitter.com/lucasrcezimbra/status/1704465326321070555 class=external-link target=_blank rel=noopener>Tweet</a>)<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>user <span style=color:#39c>=</span> <span style=color:#cd0000>&#34;eric_idle&#34;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>user<span style=color:#cd0000>=}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#34;user=&#39;eric_idle&#39;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>user <span style=color:#cd0000>= }</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#34;user = &#39;eric_idle&#39;&#34;</span>
</span></span></code></pre></div></li><li>padding (<a href=https://twitter.com/lucasrcezimbra/status/1714968107674939755 class=external-link target=_blank rel=noopener>Tweet</a>)<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>value <span style=color:#39c>=</span> <span style=color:#cd0000>&#34;test&#34;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>value<span style=color:#cd0000>:</span><span style=color:#cd0000>&gt;10</span><span style=color:#cd0000>}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#39;      test&#39;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>value<span style=color:#cd0000>:</span><span style=color:#cd0000>&lt;10</span><span style=color:#cd0000>}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#39;test      &#39;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>value<span style=color:#cd0000>:</span><span style=color:#cd0000>_&lt;10</span><span style=color:#cd0000>}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#39;test______&#39;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>value<span style=color:#cd0000>:</span><span style=color:#cd0000>^10</span><span style=color:#cd0000>}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#39;   test   &#39;</span>
</span></span></code></pre></div></li><li>date<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#39c>&gt;&gt;&gt;</span> <span style=color:#cd00cd>from</span> datetime <span style=color:#cd00cd>import</span> datetime
</span></span><span style=display:flex><span><span style=color:#39c>&gt;&gt;&gt;</span> d <span style=color:#39c>=</span> datetime<span style=color:#39c>.</span>now()
</span></span><span style=display:flex><span><span style=color:#39c>&gt;&gt;&gt;</span> <span style=color:#cd0000>f</span><span style=color:#cd0000>&#39;</span><span style=color:#cd0000>{</span>d<span style=color:#cd0000>:</span><span style=color:#cd0000>%Y-%m-%d</span><span style=color:#cd0000>}</span><span style=color:#cd0000>&#39;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>&#39;2024-09-27&#39;</span>
</span></span></code></pre></div></li></ul><h2 id=troubleshooting>Troubleshooting
<a class=heading-link href=#troubleshooting><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><code>[extras.pipfile_deprecated_finder.2] 'pip-shims&lt;=0.3.4' does not match '^[a-zA-Z-_.0-9]+$</code> #troubleshooting
- <code>pre-commit autoupdate</code></li><li>How to enable relative line numbers in PyCharm?<ul><li><a href=https://intellij-support.jetbrains.com/hc/en-us/community/posts/360008429240-How-To-Enable-Relative-Line-Numbers-With-IdeaVim class=external-link target=_blank rel=noopener>https://intellij-support.jetbrains.com/hc/en-us/community/posts/360008429240-How-To-Enable-Relative-Line-Numbers-With-IdeaVim</a></li><li><code>:set relativenumber</code></li></ul></li><li><code>Error: pg_config executable not found.</code> when installing psycopg2-binary<ul><li><code>sudo apt install libpq-dev</code> on Debian/Ubuntu</li></ul></li></ul><h2 id=toolbox>Toolbox
<a class=heading-link href=#toolbox><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>Background Tasks: Moved to My Toolbox - <a href=https://toolbox.cezimbra.me/lists/python-background-tasks/ class=external-link target=_blank rel=noopener>Python - Background Tasks</a></li><li>CLI: Moved to My Toolbox - <a href=https://toolbox.cezimbra.me/lists/python-cli/ class=external-link target=_blank rel=noopener>Python - CLI</a></li><li>JSON: Moved to My Toolbox - <a href=https://toolbox.cezimbra.me/lists/python-json/ class=external-link target=_blank rel=noopener>Python - JSON</a></li><li>ORM: Moved to My Toolbox - <a href=https://toolbox.cezimbra.me/lists/python-orms/ class=external-link target=_blank rel=noopener>Python - ORMs</a></li><li>RPC: Moved to My Toolbox - <a href=https://toolbox.cezimbra.me/lists/python-rpc/ class=external-link target=_blank rel=noopener>Python - RPC</a></li><li>Text Parsing: Moved to My Toolbox - <a href=https://toolbox.cezimbra.me/lists/python-text-parsing class=external-link target=_blank rel=noopener>Python - Text Parsing</a></li><li>GraphQL Server: Moved to My Toolbox - <a href=https://toolbox.cezimbra.me/lists/django-graphql/ class=external-link target=_blank rel=noopener>Django - GraphQL</a></li><li>WebAssembly: Moved to My Toolbox - <a href=https://toolbox.cezimbra.me/lists/python-webassembly/ class=external-link target=_blank rel=noopener>Python - WebAssembly</a></li><li><a href=https://github.com/haralyzer/haralyzer/ class=external-link target=_blank rel=noopener>https://github.com/haralyzer/haralyzer/</a> - Lib to read HAR files #tools</li></ul><h3 id=cache>Cache
<a class=heading-link href=#cache><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://github.com/grantjenks/python-diskcache class=external-link target=_blank rel=noopener>https://github.com/grantjenks/python-diskcache</a></li><li><a href=https://github.com/uqfoundation/klepto class=external-link target=_blank rel=noopener>https://github.com/uqfoundation/klepto</a> - persistent caching to memory, disk, or database</li></ul><h3 id=keycloak>Keycloak
<a class=heading-link href=#keycloak><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://www.baeldung.com/postman-keycloak-endpoints class=external-link target=_blank rel=noopener>https://www.baeldung.com/postman-keycloak-endpoints</a></li><li><a href=https://github.com/marcospereirampj/python-keycloak/ class=external-link target=_blank rel=noopener>https://github.com/marcospereirampj/python-keycloak/</a><ul><li>unnecessarily complex</li><li>some strange evals: <a href=https://github.com/marcospereirampj/python-keycloak/blob/8fd315d11a42a8b4afebfe84498e882bc0b736c8/keycloak/authorization/__init__.py#L78-L91 class=external-link target=_blank rel=noopener>https://github.com/marcospereirampj/python-keycloak/blob/8fd315d11a42a8b4afebfe84498e882bc0b736c8/keycloak/authorization/<strong>init</strong>.py#L78-L91</a></li></ul></li></ul><h3 id=profiling>Profiling
<a class=heading-link href=#profiling><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://github.com/joerick/pyinstrument class=external-link target=_blank rel=noopener>pyinstrument</a></li><li><a href=https://github.com/psf/pyperf class=external-link target=_blank rel=noopener>pyperf</a></li><li><a href=https://github.com/plasma-umass/scalene class=external-link target=_blank rel=noopener>scalene</a></li></ul><table><thead><tr><th>Profiler</th><th>What</th><th>Granularity</th><th>How</th></tr></thead><tbody><tr><td><a href=https://docs.python.org/3/library/timeit.html class=external-link target=_blank rel=noopener>timeit</a></td><td>run time</td><td>snippet-level</td><td></td></tr><tr><td><a href=https://docs.python.org/3/library/profile.html#module-cProfile class=external-link target=_blank rel=noopener>cProfile</a></td><td>run time</td><td>method-level</td><td>deterministic</td></tr><tr><td>statprof.py</td><td>run time</td><td>method-level</td><td>statictical</td></tr><tr><td><a href=https://github.com/pyutils/line_profiler class=external-link target=_blank rel=noopener>line_profiler</a></td><td>run time</td><td>line-level</td><td>deterministic</td></tr><tr><td><a href=https://github.com/pythonprofilers/memory_profiler class=external-link target=_blank rel=noopener>memory_profiler</a></td><td>memory</td><td>line-level</td><td>+- deterministic</td></tr><tr><td><a href=https://github.com/pympler/pympler class=external-link target=_blank rel=noopener>pympler</a></td><td>memory</td><td>method-level</td><td>deterministic</td></tr><tr><td>Fonte: <a href="https://www.youtube.com/watch?v=DUCMjsrYSrQ" class=external-link target=_blank rel=noopener>https://www.youtube.com/watch?v=DUCMjsrYSrQ</a></td><td></td><td></td><td></td></tr></tbody></table><h3 id=promptflow>Promptflow
<a class=heading-link href=#promptflow><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>#troubleshooting</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>promptflow._sdk._errors.MissingAzurePackage: &#34;promptflow[azure]&#34; is required for this functionality, please install it by running &#34;pip install promptflow-azure&#34; with your version.
</span></span></code></pre></div><p>Check if there is a connection.provider in the file <code>~/.promptflow/pf.yaml</code>.</p><h3 id=pypi-mirror>PyPI mirror
<a class=heading-link href=#pypi-mirror><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://github.com/devpi/devpi class=external-link target=_blank rel=noopener>https://github.com/devpi/devpi</a></li><li><a href=https://github.com/pypa/bandersnatch class=external-link target=_blank rel=noopener>https://github.com/pypa/bandersnatch</a></li></ul><h3 id=requests>requests
<a class=heading-link href=#requests><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://github.com/requests/toolbelt/ class=external-link target=_blank rel=noopener>https://github.com/requests/toolbelt/</a> #libs</li></ul><h3 id=retry>Retry
<a class=heading-link href=#retry><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://github.com/jd/tenacity class=external-link target=_blank rel=noopener>https://github.com/jd/tenacity</a></li></ul><h3 id=ssh>SSH
<a class=heading-link href=#ssh><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>Paramiko - <a href=https://www.paramiko.org/ class=external-link target=_blank rel=noopener>Homepage</a>; <a href=https://www.paramiko.org/ class=external-link target=_blank rel=noopener>Docs</a>; <a href=https://github.com/paramiko/paramiko class=external-link target=_blank rel=noopener>Source</a><ul><li>It doesn&rsquo;t support SOCKS5 proxy (<code>ssh -D</code>) - <a href=https://github.com/paramiko/paramiko/pull/1873 class=external-link target=_blank rel=noopener>issue</a>; <a href=https://github.com/linwownil/paramiko/pull/1/ class=external-link target=_blank rel=noopener>third-party PR</a></li><li>Port forward <a href=https://github.com/paramiko/paramiko/blob/main/demos/forward.py class=external-link target=_blank rel=noopener>example</a></li><li><a href=https://github.com/pahaz/sshtunnel class=external-link target=_blank rel=noopener>sshtunnel</a> - SSH tunnels to remote server</li></ul></li></ul><h3 id=pipelines>Pipelines
<a class=heading-link href=#pipelines><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://github.com/pditommaso/awesome-pipeline class=external-link target=_blank rel=noopener>https://github.com/pditommaso/awesome-pipeline</a></li><li><a href=https://temporal.io/ class=external-link target=_blank rel=noopener>https://temporal.io/</a></li></ul><h4 id=aidata>AI/Data
<a class=heading-link href=#aidata><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li>dagster: <a href=https://github.com/dagster-io/dagster class=external-link target=_blank rel=noopener>https://github.com/dagster-io/dagster</a> <img src=https://img.shields.io/github/stars/dagster-io/dagster alt="GitHub Repo stars"><ul><li>cloud-native data pipeline orchestrator &mldr; integrated lineage and observability &mldr;, and best-in-class testability.</li><li>designed for developing and maintaining data assets, such as tables, data sets, machine learning models, and reports.</li><li>cloud: <a href=https://dagster.io/ class=external-link target=_blank rel=noopener>https://dagster.io/</a></li><li><a href=https://dagster.io/vs/dagster-vs-airflow class=external-link target=_blank rel=noopener>vs. Airflow</a></li><li><a href=https://dagster.io/vs/dagster-vs-prefect class=external-link target=_blank rel=noopener>vs. Prefect</a></li></ul></li><li>Metaflow: <a href=https://github.com/Netflix/metaflow class=external-link target=_blank rel=noopener>https://github.com/Netflix/metaflow</a> <img src=https://img.shields.io/github/stars/Netflix/metaflow alt="GitHub Repo stars"><ul><li><a href=https://metaflow.org/ class=external-link target=_blank rel=noopener>https://metaflow.org/</a></li></ul></li><li>Prefect: <a href=https://github.com/PrefectHQ/prefect class=external-link target=_blank rel=noopener>https://github.com/PrefectHQ/prefect</a> <img src=https://img.shields.io/github/stars/PrefectHQ/prefect alt="GitHub Repo stars"><ul><li>orchestrator for data-intensive workflows.</li><li>build and observe resilient data workflows so that you can understand, react to, and recover from unexpected changes.</li><li><a href=https://dagster.io/vs/dagster-vs-prefect class=external-link target=_blank rel=noopener>vs. Dagster</a></li></ul></li><li>Pydra: <a href=https://github.com/nipype/pydra class=external-link target=_blank rel=noopener>https://github.com/nipype/pydra</a> <img src=https://img.shields.io/github/stars/nipype/pydra alt="GitHub Repo stars"><ul><li>A simple dataflow engine with scalable semantics.</li></ul></li><li>Ray: <a href=https://github.com/ray-project/ray class=external-link target=_blank rel=noopener>https://github.com/ray-project/ray</a> <img src=https://img.shields.io/github/stars/ray-project/ray alt="GitHub Repo stars"><ul><li>unified framework for scaling AI</li><li>consists of a core distributed runtime and a toolkit of libraries (Ray AIR) for simplifying ML compute</li></ul></li></ul><h4 id=general>General
<a class=heading-link href=#general><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><a href=https://github.com/apache/airflow class=external-link target=_blank rel=noopener>Airflow</a> <img src=https://img.shields.io/github/stars/apache/airflow alt="GitHub Repo stars"><ul><li><a href=https://dagster.io/vs/dagster-vs-airflow class=external-link target=_blank rel=noopener>vs. Dagster</a></li></ul></li><li>⭐️ <a href=https://github.com/joblib/joblib class=external-link target=_blank rel=noopener>Joblib</a> <img src=https://img.shields.io/github/stars/joblib/joblib alt="GitHub Repo stars"><ul><li>set of tools to provide lightweight pipelining.</li><li>Main features: disk-caching; parallel helper; fast compressed persistence.</li><li>How cache works? use <a href=https://github.com/joblib/joblib/blob/8a1faea0dd4aa6915044dd7a038da1f0de57c385/joblib/hashing.py#L244 class=external-link target=_blank rel=noopener>hash</a> to compare args</li></ul></li><li><a href=https://github.com/spotify/luigi class=external-link target=_blank rel=noopener>Luigi</a> <img src=https://img.shields.io/github/stars/spotify/luigi alt="GitHub Repo stars"><ul><li>helps you build complex pipelines of batch jobs. It handles dependency resolution, workflow management, visualization, handling failures, command line integration, and much more.</li></ul></li><li><a href=https://github.com/mara/mara-pipelines class=external-link target=_blank rel=noopener>Mara</a> <img src=https://img.shields.io/github/stars/mara/mara-pipelines alt="GitHub Repo stars"><ul><li>Principles: Data integration pipelines as code; PostgreSQL as a data processing engine; Extensive web ui; No in-app data processing; multiprocessing - single machine pipeline execution; nodes with higher cost are run first</li></ul></li><li><a href=https://github.com/openstack/mistral class=external-link target=_blank rel=noopener>Mistral</a> <img src=https://img.shields.io/github/stars/openstack/mistral alt="GitHub Repo stars"><ul><li>integrated with OpenStack</li><li>define tasks and workflows in a simple YAML and a distributed environment</li></ul></li><li><h2 id=ploomber-github-repo-stars---docs><a href=https://github.com/ploomber/ploomber class=external-link target=_blank rel=noopener>Ploomber</a> <img src=https://img.shields.io/github/stars/ploomber/ploomber alt="GitHub Repo stars"> - <a href=https://docs.ploomber.io/en/latest/index.html class=external-link target=_blank rel=noopener>Docs</a>
<a class=heading-link href=#ploomber-github-repo-stars---docs><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2></li><li><a href=https://github.com/chrthomsen/pygrametl class=external-link target=_blank rel=noopener>pygrametl</a> <img src=https://img.shields.io/github/stars/chrthomsen/pygrametl alt="GitHub Repo stars"><ul><li>provides commonly used functionality for the development of ETL processes.</li></ul></li><li><a href=https://github.com/cgarciae/pypeln/ class=external-link target=_blank rel=noopener>Pypeln</a> <img src=https://img.shields.io/github/stars/cgarciae/pypeln alt="GitHub Repo stars"><ul><li>for creating concurrent data pipelines</li><li>Main Features: Simple; Easy-to-use; Flexible; Fine-grained Control.</li><li>Queues: Process; Thread; Task.</li></ul></li><li>⭐️ <a href=https://github.com/pypyr/pypyr/ class=external-link target=_blank rel=noopener>pypyr</a> <img src=https://img.shields.io/github/stars/pypyr/pypyr alt="GitHub Repo stars"><ul><li>task runner for automation pipelines</li><li>script sequential task workflow steps in yaml</li><li>conditional execution, loops, error handling & retries</li></ul></li><li><a href=https://github.com/soravux/scoop/ class=external-link target=_blank rel=noopener>SCOOP</a> <img src=https://img.shields.io/github/stars/soravux/scoop alt="GitHub Repo stars"><ul><li>distributed task module allowing concurrent parallel programming on various environments, from heterogeneous grids to supercomputers.</li><li>designed from the following ideas: the future is parallel; simple is beautiful; parallelism should be simpler.</li><li>brokers: TCP and ZeroMQ</li></ul></li><li><a href=https://github.com/sartography/SpiffWorkflow class=external-link target=_blank rel=noopener>SpiffWorkflow</a> <img src=https://img.shields.io/github/stars/sartography/SpiffWorkflow alt="GitHub Repo stars"><ul><li>workflow engine implemented in pure Python.</li><li>support the development of low-code business applications in Python. Using BPMN will allow non-developers to describe complex workflow processes in a visual diagram</li><li>Built with: lxml; celery.</li></ul></li></ul></article></section></div><footer class=footer><section class=container>©
2025
Lucas Cezimbra
·
<a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script src=/js/htmx.min.c4fce4dc5cc9c8c3c9bf1aa788d54bb2cb25cd27114eb06551494ff61c30d6fb.js integrity="sha256-xPzk3FzJyMPJvxqniNVLssslzScRTrBlUUlP9hww1vs="></script><script src=/jquery-3.6.1.min.min.8985a8985a8bab0c06c0f4036f1a7dcb928dc0822c1d50517a1c6538f25c87db.js integrity="sha256-iYWomFqLqwwGwPQDbxp9y5KNwIIsHVBRehxlOPJch9s="></script><script src=/jquery.dataTables.min.min.16697a3bc9cb9058c116bec9c264c212029776d1292883bfbb44570a207e15a2.js integrity="sha256-Fml6O8nLkFjBFr7JwmTCEgKXdtEpKIO/u0RXCiB+FaI="></script><script src=/vis-timeline-graph2d.min.min.5557a35c7d0b9814c91ae2bad7d55f94f9451fe3e783252e212d5fe7eeaa8400.js integrity="sha256-VVejXH0LmBTJGuK619VflPlFH+PngyUuIS1f5+6qhAA="></script><script data-goatcounter=https://cezimbra.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>