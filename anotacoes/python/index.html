<!doctype html><html lang=pt><head><title>Python ¬∑ Lucas Cezimbra
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Lucas Cezimbra"><meta name=description content="How to print a tree (Tweet)
def print_tree(tree, indent=2, level=0): for name, child in tree.items(): print(' '*indent*level + name) print_tree(child, indent, level+1) How to get the args names from a function?
import inspect inspect.getfullargspec(<func>).args In [1]: import inspect In [2]: def f(x,y): ...: pass ...: In [3]: inspect.getfullargspec(f).args Out[3]: ['x', 'y'] Why avoid initing Decimal from float (Tweet)
In [1]: from decimal import Decimal In [2]: Decimal(0.1) Out[2]: Decimal('0.1000000000000000055511151231257827021181583404541015625') In [3]: Decimal('0."><meta name=keywords content><meta name=twitter:card content="summary"><meta name=twitter:image content="https://cezimbra.me/images/lucas-180x180.jpg"><meta name=twitter:title content="Python"><meta name=twitter:description content="How to print a tree (Tweet)
def print_tree(tree, indent=2, level=0): for name, child in tree.items(): print(' '*indent*level + name) print_tree(child, indent, level+1) How to get the args names from a function?
import inspect inspect.getfullargspec(<func>).args In [1]: import inspect In [2]: def f(x,y): ...: pass ...: In [3]: inspect.getfullargspec(f).args Out[3]: ['x', 'y'] Why avoid initing Decimal from float (Tweet)
In [1]: from decimal import Decimal In [2]: Decimal(0.1) Out[2]: Decimal('0.1000000000000000055511151231257827021181583404541015625') In [3]: Decimal('0."><meta name=twitter:site content="@lucasrcezimbra"><meta property="og:url" content="https://cezimbra.me/anotacoes/python/"><meta property="og:site_name" content="Lucas Cezimbra"><meta property="og:title" content="Python"><meta property="og:description" content="How to print a tree (Tweet)
def print_tree(tree, indent=2, level=0): for name, child in tree.items(): print(' '*indent*level + name) print_tree(child, indent, level+1) How to get the args names from a function?
import inspect inspect.getfullargspec(<func>).args In [1]: import inspect In [2]: def f(x,y): ...: pass ...: In [3]: inspect.getfullargspec(f).args Out[3]: ['x', 'y'] Why avoid initing Decimal from float (Tweet)
In [1]: from decimal import Decimal In [2]: Decimal(0.1) Out[2]: Decimal('0.1000000000000000055511151231257827021181583404541015625') In [3]: Decimal('0."><meta property="og:locale" content="pt"><meta property="og:type" content="article"><meta property="article:section" content="anotacoes"><meta property="article:published_time" content="2023-08-15T00:00:00+00:00"><meta property="article:modified_time" content="2024-07-12T00:00:00+00:00"><meta property="og:image" content="https://cezimbra.me/images/lucas-180x180.jpg"><link rel=canonical href=https://cezimbra.me/anotacoes/python/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.38c4552ac40f9ae3408bad40358f654ebd8804412fe74ed56f2d6c8a7af82dd3.css integrity="sha256-OMRVKsQPmuNAi61ANY9lTr2IBEEv507Vby1sinr4LdM=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/styles/custom.min.2ef373c2c125094d9302d8a924eba231d053340611b63bcf581460745cef626f.css integrity="sha256-LvNzwsElCU2TAtipJOuiMdBTNAYRtjvPWBRgdFzvYm8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/styles/project.min.cc15fca9f603b853c828be903488d99afe86c71e40721cc4927e27f7453a4a36.css integrity="sha256-zBX8qfYDuFPIKL6QNIjZmv6Gxx5AchzEkn4n90U6SjY=" crossorigin=anonymous media=screen><link rel=stylesheet href=/styles/contribution.min.cc4187dd6677d15a0c4438b74294dbe3f54269e14a831b267fb6f02a24f90d5d.css integrity="sha256-zEGH3WZ30VoMRDi3QpTb4/VCaeFKgxsmf7bwKiT5DV0=" crossorigin=anonymous media=screen><link rel=stylesheet href=/styles/jquery.dataTables.min.min.8f6eae843117db9532d2c9b910f3b28834d22d85107ce9aba8b5abbeab67400a.css integrity="sha256-j26uhDEX25Uy0sm5EPOyiDTSLYUQfOmrqLWrvqtnQAo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/styles/timeline.min.801628785543d9e7f6deb109e9561a48da7823522c0986a7dd47be117447e62f.css integrity="sha256-gBYoeFVD2ef23rEJ6VYaSNp4I1IsCYan3Ue+EXRH5i8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/lucas-32x32.jpg sizes=32x32><link rel=icon type=image/png href=/images/lucas-16x16.jpg sizes=16x16><link rel=apple-touch-icon href=/images/lucas-180x180.jpg><link rel=apple-touch-icon sizes=180x180 href=/images/lucas-180x180.jpg><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body hx-boost=true class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://cezimbra.me/>Lucas Cezimbra
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/sobre/>Sobre</a></li><li class=navigation-item><a class=navigation-link href=/projetos/>Projetos</a></li><li class=navigation-item><a class=navigation-link href=/anotacoes/indice/>Anota√ß√µes</a></li><li class=navigation-item><a class=navigation-link href=/palestras/>Palestras</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=/en/>üá∫üá∏</a></li></ul></section></nav><div class=content><section class="container page"><article><header><h1 class=title><a class=title-link href=https://cezimbra.me/anotacoes/python/>Python</a></h1></header><ul><li><p>How to print a tree (<a href=https://twitter.com/lucasrcezimbra/status/1711423408909803716 class=external-link target=_blank rel=noopener>Tweet</a>)</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cdcd00>def</span> print_tree(tree, indent<span style=color:#39c>=</span><span style=color:#cd00cd>2</span>, level<span style=color:#39c>=</span><span style=color:#cd00cd>0</span>):
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>for</span> name, child <span style=color:#cdcd00>in</span> tree<span style=color:#39c>.</span>items():
</span></span><span style=display:flex><span>	    <span style=color:#cd00cd>print</span>(<span style=color:#cd0000>&#39; &#39;</span><span style=color:#39c>*</span>indent<span style=color:#39c>*</span>level <span style=color:#39c>+</span> name)
</span></span><span style=display:flex><span>	    print_tree(child, indent, level<span style=color:#39c>+</span><span style=color:#cd00cd>1</span>)
</span></span></code></pre></div></li><li><p>How to get the args names from a function?</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>import</span> inspect
</span></span><span style=display:flex><span>inspect<span style=color:#39c>.</span>getfullargspec(<span style=color:#39c>&lt;</span>func<span style=color:#39c>&gt;</span>)<span style=color:#39c>.</span>args
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cd00cd>import</span> inspect
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>2</span>]: <span style=color:#cdcd00>def</span> f(x,y):
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:     <span style=color:#cdcd00>pass</span>
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>: 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>3</span>]: inspect<span style=color:#39c>.</span>getfullargspec(f)<span style=color:#39c>.</span>args
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>3</span>]: [<span style=color:#cd0000>&#39;x&#39;</span>, <span style=color:#cd0000>&#39;y&#39;</span>]
</span></span></code></pre></div></li><li><p>Why avoid initing Decimal from float (<a href=https://twitter.com/lucasrcezimbra/status/1696892876116914633 class=external-link target=_blank rel=noopener>Tweet</a>)</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cd00cd>from</span> decimal <span style=color:#cd00cd>import</span> Decimal
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>2</span>]: Decimal(<span style=color:#cd00cd>0.1</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>2</span>]: Decimal(<span style=color:#cd0000>&#39;0.1000000000000000055511151231257827021181583404541015625&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>3</span>]: Decimal(<span style=color:#cd0000>&#39;0.1&#39;</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>3</span>]: Decimal(<span style=color:#cd0000>&#39;0.1&#39;</span>)
</span></span></code></pre></div></li><li><p>Why avoid using mutable objects as default args (<a href=https://twitter.com/lucasrcezimbra/status/1697723506727715020 class=external-link target=_blank rel=noopener>Tweet</a>)</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cdcd00>def</span> f(k, v, d<span style=color:#39c>=</span>{}):
</span></span><span style=display:flex><span>   <span style=color:#39c>...</span>:    d[k] <span style=color:#39c>=</span> v
</span></span><span style=display:flex><span>   <span style=color:#39c>...</span>:    <span style=color:#cdcd00>return</span> d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>2</span>]: f(<span style=color:#cd0000>&#34;x&#34;</span>, <span style=color:#cd00cd>1</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>2</span>]: {<span style=color:#cd0000>&#39;x&#39;</span>: <span style=color:#cd00cd>1</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>3</span>]: f(<span style=color:#cd0000>&#34;y&#34;</span>, <span style=color:#cd00cd>2</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>3</span>]: {<span style=color:#cd0000>&#39;x&#39;</span>: <span style=color:#cd00cd>1</span>, <span style=color:#cd0000>&#39;y&#39;</span>: <span style=color:#cd00cd>2</span>}
</span></span></code></pre></div></li><li><p>How to merge PDFs (<a href=https://twitter.com/lucasrcezimbra/status/1712582240943968477 class=external-link target=_blank rel=noopener>Tweet</a>)</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>from</span> pypdf <span style=color:#cd00cd>import</span> PdfWriter
</span></span><span style=display:flex><span>w <span style=color:#39c>=</span> PdfWriter()
</span></span><span style=display:flex><span>w<span style=color:#39c>.</span>append(<span style=color:#cd0000>&#34;first.pdf&#34;</span>)
</span></span><span style=display:flex><span>w<span style=color:#39c>.</span>append(<span style=color:#cd0000>&#34;second.pdf&#34;</span>)
</span></span><span style=display:flex><span>w<span style=color:#39c>.</span>write(<span style=color:#cd0000>&#34;merged.pdf&#34;</span>)
</span></span><span style=display:flex><span>w<span style=color:#39c>.</span>close()
</span></span></code></pre></div></li><li><p>Updating list in-place (<a href=https://twitter.com/lucasrcezimbra/status/1726580798025797887 class=external-link target=_blank rel=noopener>Tweet</a>)</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>l2 <span style=color:#39c>=</span> l1 <span style=color:#39c>=</span> [<span style=color:#cd00cd>1</span>, <span style=color:#cd00cd>2</span>]
</span></span><span style=display:flex><span>l2[:] <span style=color:#39c>=</span> [<span style=color:#cd0000>&#39;a&#39;</span>, <span style=color:#cd0000>&#39;b&#39;</span>]
</span></span><span style=display:flex><span><span style=color:#cd00cd>print</span>(l1 <span style=color:#cdcd00>is</span> l2, l1, l2)
</span></span><span style=display:flex><span><span style=color:navy># True [&#39;a&#39;, &#39;b&#39;] [&#39;a&#39;, &#39;b&#39;]</span>
</span></span></code></pre></div></li><li><p><a href=https://github.com/haralyzer/haralyzer/ class=external-link target=_blank rel=noopener>https://github.com/haralyzer/haralyzer/</a> - Lib to read HAR files #tools</p></li><li><p><code>[extras.pipfile_deprecated_finder.2] 'pip-shims&lt;=0.3.4' does not match '^[a-zA-Z-_.0-9]+$</code> #troubleshooting
- <code>pre-commit autoupdate</code></p></li><li><p>How to move from pip to Poetry (<a href=https://twitter.com/lucasrcezimbra/status/1696637161993326741 class=external-link target=_blank rel=noopener>Tweet</a>)</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>poetry init
</span></span><span style=display:flex><span>cat requirements.txt | cut -d <span style=color:#cd0000>&#39;=&#39;</span> -f <span style=color:#cd00cd>1</span> | xargs poetry add
</span></span><span style=display:flex><span>cat requirements-dev.txt | cut -d <span style=color:#cd0000>&#39;=&#39;</span> -f <span style=color:#cd00cd>1</span> | xargs poetry add --group<span style=color:#39c>=</span>dev
</span></span><span style=display:flex><span>rm requirements.txt requirements-dev.txt
</span></span><span style=display:flex><span>poetry install
</span></span><span style=display:flex><span>poetry run &lt;command&gt;
</span></span></code></pre></div></li><li><p>How to use global packages using Poetry?</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install pipx
</span></span><span style=display:flex><span>pipx install &lt;package&gt;
</span></span></code></pre></div></li><li><p>Install requirements from git using ssh</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip install git+ssh://git@github.com/&lt;org&gt;/&lt;repo&gt;
</span></span></code></pre></div></li><li><p>How to split string as CLI args? (<a href=https://twitter.com/lucasrcezimbra/status/1790034271727493258 class=external-link target=_blank rel=noopener>Tweet</a>)</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#39c>&gt;&gt;&gt;</span> <span style=color:#cd0000>&#34;--system &#39;string w/ multiple words&#39;&#34;</span><span style=color:#39c>.</span>split()
</span></span><span style=display:flex><span>[<span style=color:#cd0000>&#39;--system&#39;</span>, <span style=color:#cd0000>&#34;&#39;string&#34;</span>, <span style=color:#cd0000>&#39;w/&#39;</span>, <span style=color:#cd0000>&#39;multiple&#39;</span>, <span style=color:#cd0000>&#34;words&#39;&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#39c>&gt;&gt;&gt;</span> <span style=color:#cd00cd>import</span> shlex
</span></span><span style=display:flex><span><span style=color:#39c>&gt;&gt;&gt;</span> shlex<span style=color:#39c>.</span>split(<span style=color:#cd0000>&#34;--system &#39;string w/ multiple words&#39;&#34;</span>)
</span></span><span style=display:flex><span>[<span style=color:#cd0000>&#39;--system&#39;</span>, <span style=color:#cd0000>&#39;string w/ multiple words&#39;</span>]
</span></span></code></pre></div></li><li><p>Send arguments into a generator</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cdcd00>def</span> generator():
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:     <span style=color:#cdcd00>while</span> <span style=color:#cdcd00>True</span>:
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:         received <span style=color:#39c>=</span> <span style=color:#cdcd00>yield</span> <span style=color:#cd0000>&#39;DATA&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:         <span style=color:#cd00cd>print</span>(<span style=color:#cd0000>&#39;Received:&#39;</span>, received)
</span></span><span style=display:flex><span>    <span style=color:#39c>...</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>2</span>]: g <span style=color:#39c>=</span> generator()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>3</span>]: <span style=color:#cd00cd>next</span>(g)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>3</span>]: <span style=color:#cd0000>&#39;DATA&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>4</span>]: g<span style=color:#39c>.</span>send(<span style=color:#cd00cd>1</span>)
</span></span><span style=display:flex><span>Received: <span style=color:#cd00cd>1</span>
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>4</span>]: <span style=color:#cd0000>&#39;DATA&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#cd00cd>5</span>]: g<span style=color:#39c>.</span>send(<span style=color:#cd00cd>2</span>)
</span></span><span style=display:flex><span>Received: <span style=color:#cd00cd>2</span>
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>5</span>]: <span style=color:#cd0000>&#39;DATA&#39;</span>
</span></span></code></pre></div></li></ul><h2 id=anti-patterns>Anti-Patterns
<a class=heading-link href=#anti-patterns><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://docs.quantifiedcode.com/python-anti-patterns/ class=external-link target=_blank rel=noopener>The Little Book of Python Anti-Patterns</a></li></ul><h2 id=auth>Auth
<a class=heading-link href=#auth><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://authlib.org/ class=external-link target=_blank rel=noopener>Authlib</a> - The ultimate library in building OAuth and OpenID Connect servers</li></ul><h2 id=background-tasks>Background tasks
<a class=heading-link href=#background-tasks><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>Relates to <a href=https://cezimbra.me/anotacoes/message-queues/>Message Queues</a></p><ul><li><a href=https://github.com/celery/celery class=external-link target=_blank rel=noopener>Celery</a></li><li><a href=https://dramatiq.io/ class=external-link target=_blank rel=noopener>Dramatiq</a><ul><li><a href=https://github.com/Bogdanp/django_dramatiq class=external-link target=_blank rel=noopener>django_dramatiq</a> - Django integration</li><li><a href=https://gitlab.com/dalibo/dramatiq-pg class=external-link target=_blank rel=noopener>dramatiq-pg</a> - PostgreSQL as Broker</li><li><a href=https://github.com/uptick/django-dramatiq-pg/ class=external-link target=_blank rel=noopener>django-dramatiq-pg</a> - Django integration with PostgreSQL as broker</li></ul></li><li><a href=https://github.com/coleifer/huey class=external-link target=_blank rel=noopener>huey</a> - a little task queue for python</li><li><a href=https://github.com/procrastinate-org/procrastinate class=external-link target=_blank rel=noopener>Procrastinate</a> - PostgreSQL-based Task Queue for Python</li><li><a href=https://python-rq.org/ class=external-link target=_blank rel=noopener>rq</a> (Redis Queue) - library for queueing jobs and processing them in the background with workers.</li></ul><h2 id=cache>Cache
<a class=heading-link href=#cache><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://github.com/grantjenks/python-diskcache class=external-link target=_blank rel=noopener>https://github.com/grantjenks/python-diskcache</a></li><li><a href=https://github.com/uqfoundation/klepto class=external-link target=_blank rel=noopener>https://github.com/uqfoundation/klepto</a> - persistent caching to memory, disk, or database</li></ul><h2 id=cli>CLI
<a class=heading-link href=#cli><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://palletsprojects.com/p/click/ class=external-link target=_blank rel=noopener>Click</a> - <a href=https://click.palletsprojects.com/en/8.1.x/ class=external-link target=_blank rel=noopener>Docs</a> - <a href=https://github.com/pallets/click class=external-link target=_blank rel=noopener>Source code</a></li><li><a href=https://github.com/google/python-fire class=external-link target=_blank rel=noopener>Fire</a></li><li><a href=https://github.com/tiangolo/typer class=external-link target=_blank rel=noopener>typer</a> - <a href=https://typer.tiangolo.com/ class=external-link target=_blank rel=noopener>Docs</a></li></ul><h2 id=data>Data
<a class=heading-link href=#data><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h3 id=pandas>pandas
<a class=heading-link href=#pandas><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://www.pola.rs/ class=external-link target=_blank rel=noopener>https://www.pola.rs/</a> - Lightning-fast DataFrame library for Rust and Python</li><li>axios: 0=linha e 1=coluna</li><li>pandas-profilling - <a href=https://pypi.org/project/pandas-profiling/ class=external-link target=_blank rel=noopener>PyPI</a>, <a href=https://pandas-profiling.ydata.ai/docs/master/index.html class=external-link target=_blank rel=noopener>docs</a></li><li>Geral<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#39c>.</span>shape  <span style=color:navy># (linhas, colunas)</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>info()
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>High<span style=color:#39c>.</span>mean()  <span style=color:navy># m√©dia da coluna High</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>Date <span style=color:#39c>=</span> pd<span style=color:#39c>.</span>to_datetime(df<span style=color:#39c>.</span>Date)  <span style=color:navy># convert column to datetime</span>
</span></span></code></pre></div></li><li>Informa√ß√µes Estat√≠sticas<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#39c>.</span>describe()  <span style=color:navy># informa√ß√µes estat√≠sticas</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>ride_duration<span style=color:#39c>.</span>std()  <span style=color:navy># desvio padr√£o da coluna ride_duration</span>
</span></span></code></pre></div></li><li>Visualiza√ß√£o<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#39c>.</span>High<span style=color:#39c>.</span>plot()  <span style=color:navy># gr√°fico da coluna High</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>Volume<span style=color:#39c>.</span>hist()  <span style=color:navy># histograma da coluna Volume</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>plot<span style=color:#39c>.</span>scatter(<span style=color:#cd0000>&#39;c1&#39;</span>, <span style=color:#cd0000>&#39;c2&#39;</span>)  <span style=color:navy># gr√°fico de dispers√£o</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>Low<span style=color:#39c>.</span>plot(kind<span style=color:#39c>=</span><span style=color:#cd0000>&#39;box&#39;</span>)  <span style=color:navy># gr√°fico boxplot</span>
</span></span></code></pre></div></li><li>Valores ausentes<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#39c>.</span>isnull()<span style=color:#39c>.</span>sum()  <span style=color:navy># conta o n√∫mero de linhas com NaN</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>isnull()<span style=color:#39c>.</span>sum() <span style=color:#39c>/</span> df<span style=color:#39c>.</span>shape[<span style=color:#cd00cd>0</span>] <span style=color:navy># % de valores ausentes</span>
</span></span><span style=display:flex><span>df<span style=color:#39c>.</span>dropna(subset<span style=color:#39c>=</span>[<span style=color:#cd0000>&#39;user_gender&#39;</span>], axios<span style=color:#39c>=</span><span style=color:#cd00cd>0</span>)  <span style=color:navy># apaga as linhas com valor NaNs da coluna user_gender</span>
</span></span></code></pre></div></li></ul><h2 id=dataclasses>Dataclasses
<a class=heading-link href=#dataclasses><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>attrs vs pydantic: <a href=https://threeofwands.com/why-i-use-attrs-instead-of-pydantic/ class=external-link target=_blank rel=noopener>Why I use attrs instead of pydantic</a></li></ul><h2 id=json>JSON
<a class=heading-link href=#json><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://github.com/TeskaLabs/cysimdjson class=external-link target=_blank rel=noopener>cysimdjson</a> - SIMDJSON is C++ JSON parser, reportedly the fastest JSON parser on the planet.</li><li><a href=https://github.com/ICRAR/ijson class=external-link target=_blank rel=noopener>ijson</a> - iterative JSON</li><li><a href=https://github.com/ijl/orjson class=external-link target=_blank rel=noopener>orjson</a> - fast, supports NumPy</li><li><a href=https://github.com/python-rapidjson/python-rapidjson class=external-link target=_blank rel=noopener>rapidjson</a> - RapidJSON is an extremely fast C++ JSON parser and serialization library</li><li><a href=https://github.com/ultrajson/ultrajson class=external-link target=_blank rel=noopener>ujson</a> - written in C with Python bindings</li></ul><h2 id=orm>ORM
<a class=heading-link href=#orm><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://pugsql.org/ class=external-link target=_blank rel=noopener>PugSQL</a> - simple interface for using parameterized SQL</li></ul><h2 id=pipelines>Pipelines
<a class=heading-link href=#pipelines><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://github.com/pditommaso/awesome-pipeline class=external-link target=_blank rel=noopener>https://github.com/pditommaso/awesome-pipeline</a></li><li><a href=https://temporal.io/ class=external-link target=_blank rel=noopener>https://temporal.io/</a></li></ul><h3 id=aidata>AI/Data
<a class=heading-link href=#aidata><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>dagster: <a href=https://github.com/dagster-io/dagster class=external-link target=_blank rel=noopener>https://github.com/dagster-io/dagster</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/dagster-io/dagster><ul><li>cloud-native data pipeline orchestrator &mldr; integrated lineage and observability &mldr;, and best-in-class testability.</li><li>designed for developing and maintaining data assets, such as tables, data sets, machine learning models, and reports.</li><li>cloud: <a href=https://dagster.io/ class=external-link target=_blank rel=noopener>https://dagster.io/</a></li><li><a href=https://dagster.io/vs/dagster-vs-airflow class=external-link target=_blank rel=noopener>vs. Airflow</a></li><li><a href=https://dagster.io/vs/dagster-vs-prefect class=external-link target=_blank rel=noopener>vs. Prefect</a></li></ul></li><li>Metaflow: <a href=https://github.com/Netflix/metaflow class=external-link target=_blank rel=noopener>https://github.com/Netflix/metaflow</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/Netflix/metaflow><ul><li><a href=https://metaflow.org/ class=external-link target=_blank rel=noopener>https://metaflow.org/</a></li></ul></li><li>Prefect: <a href=https://github.com/PrefectHQ/prefect class=external-link target=_blank rel=noopener>https://github.com/PrefectHQ/prefect</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/PrefectHQ/prefect><ul><li>orchestrator for data-intensive workflows.</li><li>build and observe resilient data workflows so that you can understand, react to, and recover from unexpected changes.</li><li><a href=https://dagster.io/vs/dagster-vs-prefect class=external-link target=_blank rel=noopener>vs. Dagster</a></li></ul></li><li>Pydra: <a href=https://github.com/nipype/pydra class=external-link target=_blank rel=noopener>https://github.com/nipype/pydra</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/nipype/pydra><ul><li>A simple dataflow engine with scalable semantics.</li></ul></li><li>Ray: <a href=https://github.com/ray-project/ray class=external-link target=_blank rel=noopener>https://github.com/ray-project/ray</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/ray-project/ray><ul><li>unified framework for scaling AI</li><li>consists of a core distributed runtime and a toolkit of libraries (Ray AIR) for simplifying ML compute</li></ul></li></ul><h3 id=general>General
<a class=heading-link href=#general><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://github.com/apache/airflow class=external-link target=_blank rel=noopener>Airflow</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/apache/airflow><ul><li><a href=https://dagster.io/vs/dagster-vs-airflow class=external-link target=_blank rel=noopener>vs. Dagster</a></li></ul></li><li>‚≠êÔ∏è <a href=https://github.com/joblib/joblib class=external-link target=_blank rel=noopener>Joblib</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/joblib/joblib><ul><li>set of tools to provide lightweight pipelining.</li><li>Main features: disk-caching; parallel helper; fast compressed persistence.</li><li>How cache works? use <a href=https://github.com/joblib/joblib/blob/8a1faea0dd4aa6915044dd7a038da1f0de57c385/joblib/hashing.py#L244 class=external-link target=_blank rel=noopener>hash</a> to compare args</li></ul></li><li><a href=https://github.com/spotify/luigi class=external-link target=_blank rel=noopener>Luigi</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/spotify/luigi><ul><li>helps you build complex pipelines of batch jobs. It handles dependency resolution, workflow management, visualization, handling failures, command line integration, and much more.</li></ul></li><li><a href=https://github.com/mara/mara-pipelines class=external-link target=_blank rel=noopener>Mara</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/mara/mara-pipelines><ul><li>Principles: Data integration pipelines as code; PostgreSQL as a data processing engine; Extensive web ui; No in-app data processing; multiprocessing - single machine pipeline execution; nodes with higher cost are run first</li></ul></li><li><a href=https://github.com/openstack/mistral class=external-link target=_blank rel=noopener>Mistral</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/openstack/mistral><ul><li>integrated with OpenStack</li><li>define tasks and workflows in a simple YAML and a distributed environment</li></ul></li><li><h2 id=ploomberhttpsgithubcomploomberploomber-github-repo-starshttpsimgshieldsiogithubstarsploomberploomber---docshttpsdocsploomberioenlatestindexhtml><a href=https://github.com/ploomber/ploomber class=external-link target=_blank rel=noopener>Ploomber</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/ploomber/ploomber> - <a href=https://docs.ploomber.io/en/latest/index.html class=external-link target=_blank rel=noopener>Docs</a>
<a class=heading-link href=#ploomberhttpsgithubcomploomberploomber-github-repo-starshttpsimgshieldsiogithubstarsploomberploomber---docshttpsdocsploomberioenlatestindexhtml><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2></li><li><a href=https://github.com/chrthomsen/pygrametl class=external-link target=_blank rel=noopener>pygrametl</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/chrthomsen/pygrametl><ul><li>provides commonly used functionality for the development of ETL processes.</li></ul></li><li><a href=https://github.com/cgarciae/pypeln/ class=external-link target=_blank rel=noopener>Pypeln</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/cgarciae/pypeln><ul><li>for creating concurrent data pipelines</li><li>Main Features: Simple; Easy-to-use; Flexible; Fine-grained Control.</li><li>Queues: Process; Thread; Task.</li></ul></li><li>‚≠êÔ∏è <a href=https://github.com/pypyr/pypyr/ class=external-link target=_blank rel=noopener>pypyr</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/pypyr/pypyr><ul><li>task runner for automation pipelines</li><li>script sequential task workflow steps in yaml</li><li>conditional execution, loops, error handling & retries</li></ul></li><li><a href=https://github.com/soravux/scoop/ class=external-link target=_blank rel=noopener>SCOOP</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/soravux/scoop><ul><li>distributed task module allowing concurrent parallel programming on various environments, from heterogeneous grids to supercomputers.</li><li>designed from the following ideas: the future is parallel; simple is beautiful; parallelism should be simpler.</li><li>brokers: TCP and ZeroMQ</li></ul></li><li><a href=https://github.com/sartography/SpiffWorkflow class=external-link target=_blank rel=noopener>SpiffWorkflow</a> <img alt="GitHub Repo stars" src=https://img.shields.io/github/stars/sartography/SpiffWorkflow><ul><li>workflow engine implemented in pure Python.</li><li>support the development of low-code business applications in Python. Using BPMN will allow non-developers to describe complex workflow processes in a visual diagram</li><li>Built with: lxml; celery.</li></ul></li></ul><h2 id=profiling>Profiling
<a class=heading-link href=#profiling><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://github.com/psf/pyperf class=external-link target=_blank rel=noopener>pyperf</a></li><li><a href=https://github.com/plasma-umass/scalene class=external-link target=_blank rel=noopener>scalene</a></li></ul><table><thead><tr><th>Profiler</th><th>What</th><th>Granularity</th><th>How</th></tr></thead><tbody><tr><td><a href=https://docs.python.org/3/library/timeit.html class=external-link target=_blank rel=noopener>timeit</a></td><td>run time</td><td>snippet-level</td><td></td></tr><tr><td><a href=https://docs.python.org/3/library/profile.html#module-cProfile class=external-link target=_blank rel=noopener>cProfile</a></td><td>run time</td><td>method-level</td><td>deterministic</td></tr><tr><td>statprof.py</td><td>run time</td><td>method-level</td><td>statictical</td></tr><tr><td><a href=https://github.com/pyutils/line_profiler class=external-link target=_blank rel=noopener>line_profiler</a></td><td>run time</td><td>line-level</td><td>deterministic</td></tr><tr><td><a href=https://github.com/pythonprofilers/memory_profiler class=external-link target=_blank rel=noopener>memory_profiler</a></td><td>memory</td><td>line-level</td><td>+- deterministic</td></tr><tr><td><a href=https://github.com/pympler/pympler class=external-link target=_blank rel=noopener>pympler</a></td><td>memory</td><td>method-level</td><td>deterministic</td></tr><tr><td>Fonte: <a href="https://www.youtube.com/watch?v=DUCMjsrYSrQ" class=external-link target=_blank rel=noopener>https://www.youtube.com/watch?v=DUCMjsrYSrQ</a></td><td></td><td></td><td></td></tr></tbody></table><h2 id=pycharm>PyCharm
<a class=heading-link href=#pycharm><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><ul><li>How to enable relative line numbers?<ul><li><a href=https://intellij-support.jetbrains.com/hc/en-us/community/posts/360008429240-How-To-Enable-Relative-Line-Numbers-With-IdeaVim class=external-link target=_blank rel=noopener>https://intellij-support.jetbrains.com/hc/en-us/community/posts/360008429240-How-To-Enable-Relative-Line-Numbers-With-IdeaVim</a></li><li><code>:set relativenumber</code></li></ul></li></ul></li></ul><h2 id=pypi-mirror>PyPI mirror
<a class=heading-link href=#pypi-mirror><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://github.com/devpi/devpi class=external-link target=_blank rel=noopener>https://github.com/devpi/devpi</a></li><li><a href=https://github.com/pypa/bandersnatch class=external-link target=_blank rel=noopener>https://github.com/pypa/bandersnatch</a></li></ul><h2 id=retry>Retry
<a class=heading-link href=#retry><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://github.com/jd/tenacity class=external-link target=_blank rel=noopener>https://github.com/jd/tenacity</a></li></ul><h2 id=strings>Strings
<a class=heading-link href=#strings><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h3 id=formatting>Formatting
<a class=heading-link href=#formatting><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><h4 id=-operator-tweethttpstwittercomlucasrcezimbrastatus1704086552274424259><code>%</code> operator (<a href=https://twitter.com/lucasrcezimbra/status/1704086552274424259 class=external-link target=_blank rel=noopener>Tweet</a>)
<a class=heading-link href=#-operator-tweethttpstwittercomlucasrcezimbrastatus1704086552274424259><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h4><ul><li><code>%s</code>: String conversion.</li><li><code>%d</code> or <code>%i</code>: Integer conversion.</li><li><code>%f</code>: Float conversion.</li><li><code>%o</code>: Octal conversion.</li><li><code>%x</code> or <code>%X</code>: Hexadecimal conversion.</li><li><code>%e</code> or <code>%E</code>: Exponential notation conversion.</li></ul><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#cd00cd>1</span>]: <span style=color:#cd0000>&#34;</span><span style=color:#cd0000>%s</span><span style=color:#cd0000> </span><span style=color:#cd0000>%d</span><span style=color:#cd0000> </span><span style=color:#cd0000>%f</span><span style=color:#cd0000> </span><span style=color:#cd0000>%o</span><span style=color:#cd0000> </span><span style=color:#cd0000>%x</span><span style=color:#cd0000> </span><span style=color:#cd0000>%e</span><span style=color:#cd0000>&#34;</span> <span style=color:#39c>%</span> (<span style=color:#cd0000>&#34;a&#34;</span>, <span style=color:#cd00cd>1</span>, <span style=color:#cd00cd>1.0</span>, <span style=color:#cd00cd>8</span>, <span style=color:#cd00cd>16</span>, <span style=color:#cd00cd>100</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#cd00cd>1</span>]: <span style=color:#cd0000>&#39;a 1 1.000000 10 10 1.000000e+02&#39;</span>
</span></span></code></pre></div><h3 id=f-string>f-string
<a class=heading-link href=#f-string><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Fonte: <a href=https://fstring.help/ class=external-link target=_blank rel=noopener>https://fstring.help/</a></p><ul><li>debugging (<a href=https://twitter.com/lucasrcezimbra/status/1704465326321070555 class=external-link target=_blank rel=noopener>Tweet</a>)<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>user <span style=color:#39c>=</span> <span style=color:#cd0000>&#34;eric_idle&#34;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>user<span style=color:#cd0000>=}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#34;user=&#39;eric_idle&#39;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>user <span style=color:#cd0000>= }</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#34;user = &#39;eric_idle&#39;&#34;</span>
</span></span></code></pre></div></li><li>padding (<a href=https://twitter.com/lucasrcezimbra/status/1714968107674939755 class=external-link target=_blank rel=noopener>Tweet</a>)<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>value <span style=color:#39c>=</span> <span style=color:#cd0000>&#34;test&#34;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>value<span style=color:#cd0000>:</span><span style=color:#cd0000>&gt;10</span><span style=color:#cd0000>}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#39;      test&#39;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>value<span style=color:#cd0000>:</span><span style=color:#cd0000>&lt;10</span><span style=color:#cd0000>}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#39;test      &#39;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>value<span style=color:#cd0000>:</span><span style=color:#cd0000>_&lt;10</span><span style=color:#cd0000>}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#39;test______&#39;</span>
</span></span><span style=display:flex><span><span style=color:#cd0000>f</span><span style=color:#cd0000>&#34;</span><span style=color:#cd0000>{</span>value<span style=color:#cd0000>:</span><span style=color:#cd0000>^10</span><span style=color:#cd0000>}</span><span style=color:#cd0000>&#34;</span>
</span></span><span style=display:flex><span><span style=color:navy># &#39;   test   &#39;</span>
</span></span></code></pre></div></li></ul><h3 id=parsing>Parsing
<a class=heading-link href=#parsing><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://github.com/r1chardj0n3s/parse class=external-link target=_blank rel=noopener>parse</a> - Parse strings using a specification based on the Python format() syntax.<ul><li><ul><li><a href=https://github.com/jenisys/parse_type class=external-link target=_blank rel=noopener>https://github.com/jenisys/parse_type</a> - extends with the following features: build type converters; compose type converters; CardinalityField naming schema</li></ul></li></ul></li><li><a href=https://github.com/dmulyalin/ttp class=external-link target=_blank rel=noopener>ttp</a> - Template Text Parser</li></ul><h2 id=tests>Tests
<a class=heading-link href=#tests><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>How to print logs when running pytest? (<a href=https://twitter.com/lucasrcezimbra/status/1705183510837747905 class=external-link target=_blank rel=noopener>Tweet</a>)<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pytest --log-cli-level DEBUG
</span></span></code></pre></div></li></ul><h3 id=fixtures>Fixtures
<a class=heading-link href=#fixtures><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><p>Why to fixtures instead of namespace variables for mocked data (<a href=https://twitter.com/lucasrcezimbra/status/1704810879169024089 class=external-link target=_blank rel=noopener>Tweet</a>)</p><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:navy># without fixture</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MOCK_DATA <span style=color:#39c>=</span> [{<span style=color:#cd0000>&#34;field&#34;</span>: <span style=color:#cd0000>&#34;value&#34;</span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> test_one():
</span></span><span style=display:flex><span>    MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>=</span> <span style=color:#cd0000>&#39;other value&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>assert</span> MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;other value&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> test_two():
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>assert</span> MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;value&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># with fixture</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>@pytest.fixture
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> mock_data():
</span></span><span style=display:flex><span>	<span style=color:#cdcd00>return</span> [{<span style=color:#cd0000>&#34;field&#34;</span>: <span style=color:#cd0000>&#34;value&#34;</span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> test_three(mock_data):
</span></span><span style=display:flex><span>    mock_data[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>=</span> <span style=color:#cd0000>&#39;other value&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>assert</span> MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;other value&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>def</span> test_four(mock_data):
</span></span><span style=display:flex><span>    <span style=color:#cdcd00>assert</span> mock_data[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;value&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#cdcd00>def</span> test_two():
</span></span><span style=display:flex><span><span style=color:#39c>&gt;</span>       <span style=color:#cdcd00>assert</span> MOCK_DATA[<span style=color:#cd00cd>0</span>][<span style=color:#cd0000>&#39;field&#39;</span>] <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;value&#39;</span>
</span></span><span style=display:flex><span>E       <span style=color:#669;font-weight:700>AssertionError</span>: <span style=color:#cdcd00>assert</span> <span style=color:#cd0000>&#39;other value&#39;</span> <span style=color:#39c>==</span> <span style=color:#cd0000>&#39;value&#39;</span>
</span></span><span style=display:flex><span>E         <span style=color:#39c>-</span> value
</span></span><span style=display:flex><span>E         <span style=color:#39c>+</span> other value
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>path<span style=color:#39c>/</span>to<span style=color:#39c>/</span>tests<span style=color:#39c>/</span>test_zero<span style=color:#39c>.</span>py:<span style=color:#cd00cd>15</span>: <span style=color:#669;font-weight:700>AssertionError</span>
</span></span><span style=display:flex><span><span style=color:#39c>=====================&lt;</span>mark<span style=color:#39c>&gt;</span> <span style=color:#cd00cd>1</span> failed, <span style=color:#cd00cd>3</span> passed <span style=color:#cdcd00>in</span> <span style=color:#cd00cd>0.18</span>s <span style=color:#39c>&lt;/</span>mark<span style=color:#39c>&gt;=====================</span>
</span></span></code></pre></div></li></ul><h3 id=speccing>Speccing
<a class=heading-link href=#speccing><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>Why to use spec when using Mock? (<a href=https://twitter.com/lucasrcezimbra/status/1713876531754201433 class=external-link target=_blank rel=noopener>Tweet</a>)<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>from</span> unittest.mock <span style=color:#cd00cd>import</span> Mock
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>class</span> <span style=color:#00cdcd>MyClass</span>:
</span></span><span style=display:flex><span>	<span style=color:#cdcd00>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># without spec</span>
</span></span><span style=display:flex><span>Mock()<span style=color:#39c>.</span>wrong_method()
</span></span><span style=display:flex><span><span style=color:navy># Out: &lt;Mock name=&#39;mock.wrong_method()&#39; id=&#39;140607049530000&#39;&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># with spec</span>
</span></span><span style=display:flex><span>Mock(spec<span style=color:#39c>=</span>MyClass)<span style=color:#39c>.</span>wrong_method()
</span></span><span style=display:flex><span><span style=color:navy># raises &#34;AttributeError: Mock object has no attribute &#39;wrong_method&#39;&#34;</span>
</span></span></code></pre></div></li><li>Why to use autospec? (<a href=https://twitter.com/lucasrcezimbra/status/1714230538305692145 class=external-link target=_blank rel=noopener>Tweet</a>)<div class=highlight><pre tabindex=0 style=color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#cd00cd>from</span> unittest.mock <span style=color:#cd00cd>import</span> create_autospec, Mock
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cdcd00>class</span> <span style=color:#00cdcd>MyClass</span>:
</span></span><span style=display:flex><span>    myobj <span style=color:#39c>=</span> <span style=color:#cd00cd>object</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># without autospec</span>
</span></span><span style=display:flex><span>Mock(spec<span style=color:#39c>=</span>MyClass)<span style=color:#39c>.</span>myobj<span style=color:#39c>.</span>wrong_method()
</span></span><span style=display:flex><span><span style=color:navy># Out: &lt;Mock name=&#39;mock.myobj.wrong_method()&#39; id=&#39;140671042320272&#39;&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:navy># with autospec</span>
</span></span><span style=display:flex><span>create_autospec(MyClass)<span style=color:#39c>.</span>myobj<span style=color:#39c>.</span>wrong_method()
</span></span><span style=display:flex><span><span style=color:navy># raises &#34;AttributeError: Mock object has no attribute &#39;wrong_method&#39;&#34;</span>
</span></span></code></pre></div></li></ul><h2 id=web>Web
<a class=heading-link href=#web><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://cezimbra.me/anotacoes/django/>Django</a></li><li><a href=https://github.com/jordaneremieff/mangum class=external-link target=_blank rel=noopener>Mangum</a> - <a href=https://cezimbra.me/anotacoes/aws/>AWS</a> Lambda support for ASGI applications</li></ul><h3 id=graphql-server>GraphQL Server
<a class=heading-link href=#graphql-server><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li>Ariadne - <a href=https://ariadnegraphql.org/ class=external-link target=_blank rel=noopener>https://ariadnegraphql.org/</a></li><li>Graphene - <a href=https://graphene-python.org/ class=external-link target=_blank rel=noopener>https://graphene-python.org/</a><ul><li>Has not been maintained</li></ul></li><li>Strawberry - <a href=https://strawberry.rocks/ class=external-link target=_blank rel=noopener>https://strawberry.rocks/</a><ul><li>Hard to understand the codebase</li></ul></li><li>Tartiflette - <a href=https://tartiflette.io/ class=external-link target=_blank rel=noopener>https://tartiflette.io/</a><ul><li>Needs to write the resolvers by hand. I didn&rsquo;t find a good integration w/ ORMs</li></ul></li></ul><h3 id=keycloak>Keycloak
<a class=heading-link href=#keycloak><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><ul><li><a href=https://www.baeldung.com/postman-keycloak-endpoints class=external-link target=_blank rel=noopener>https://www.baeldung.com/postman-keycloak-endpoints</a></li><li><a href=https://github.com/marcospereirampj/python-keycloak/ class=external-link target=_blank rel=noopener>https://github.com/marcospereirampj/python-keycloak/</a><ul><li>unnecessarily complex</li><li>some strange evals: <a href=https://github.com/marcospereirampj/python-keycloak/blob/8fd315d11a42a8b4afebfe84498e882bc0b736c8/keycloak/authorization/__init__.py#L78-L91 class=external-link target=_blank rel=noopener>https://github.com/marcospereirampj/python-keycloak/blob/8fd315d11a42a8b4afebfe84498e882bc0b736c8/keycloak/authorization/<strong>init</strong>.py#L78-L91</a></li></ul></li></ul><h2 id=requests>requests
<a class=heading-link href=#requests><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://github.com/requests/toolbelt/ class=external-link target=_blank rel=noopener>https://github.com/requests/toolbelt/</a> #libs</li></ul><h2 id=rpc>RPC
<a class=heading-link href=#rpc><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://grpc.io/docs/languages/python/quickstart/ class=external-link target=_blank rel=noopener>gRPC</a></li><li><a href=https://github.com/tomerfiliba-org/rpyc class=external-link target=_blank rel=noopener>RPyC</a> - <a href=https://rpyc.readthedocs.io/en/latest/ class=external-link target=_blank rel=noopener>Docs</a> - library for symmetrical remote procedure calls, clustering, and distributed-computing #OpenSource</li></ul><h2 id=ssh>SSH
<a class=heading-link href=#ssh><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>Paramiko - <a href=https://www.paramiko.org/ class=external-link target=_blank rel=noopener>Homepage</a>; <a href=https://www.paramiko.org/ class=external-link target=_blank rel=noopener>Docs</a>; <a href=https://github.com/paramiko/paramiko class=external-link target=_blank rel=noopener>Source</a><ul><li>It doesn&rsquo;t support SOCKS5 proxy (<code>ssh -D</code>) - <a href=https://github.com/paramiko/paramiko/pull/1873 class=external-link target=_blank rel=noopener>issue</a>; <a href=https://github.com/linwownil/paramiko/pull/1/ class=external-link target=_blank rel=noopener>third-party PR</a></li><li>Port forward <a href=https://github.com/paramiko/paramiko/blob/main/demos/forward.py class=external-link target=_blank rel=noopener>example</a></li><li><a href=https://github.com/pahaz/sshtunnel class=external-link target=_blank rel=noopener>sshtunnel</a> - SSH tunnels to remote server</li></ul></li><li></li></ul><h2 id=webassembly>WebAssembly
<a class=heading-link href=#webassembly><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li><a href=https://extism.org/ class=external-link target=_blank rel=noopener>Extism</a> - The cross-language framework - <a href=https://github.com/extism/python-sdk class=external-link target=_blank rel=noopener>SDK</a></li><li><a href=https://pyodide.org/en/stable/ class=external-link target=_blank rel=noopener>Pyodide</a> - distribution for the browser and Node.js based on WebAssembly - <a href=https://github.com/pyodide/pyodide class=external-link target=_blank rel=noopener>GitHub</a></li><li><a href=https://pyscript.net/ class=external-link target=_blank rel=noopener>PyScript</a> - Run Python in Your HTML</li></ul></article></section></div><footer class=footer><section class=container>¬©
2024
Lucas Cezimbra
¬∑
<a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script src=/js/htmx.min.c4fce4dc5cc9c8c3c9bf1aa788d54bb2cb25cd27114eb06551494ff61c30d6fb.js integrity="sha256-xPzk3FzJyMPJvxqniNVLssslzScRTrBlUUlP9hww1vs="></script><script src=/scripts/jquery-3.6.1.min.min.899c507f861d29811618efbb399a86b5ef9e4367b474140a68ac4252a0005bca.js integrity="sha256-iZxQf4YdKYEWGO+7OZqGte+eQ2e0dBQKaKxCUqAAW8o="></script><script src=/scripts/jquery.dataTables.min.min.81d3bc71314508a0b97e678aad65ff0b3312dcac9a1a7332273aba32a4802ae4.js integrity="sha256-gdO8cTFFCKC5fmeKrWX/CzMS3KyaGnMyJzq6MqSAKuQ="></script><script data-goatcounter=https://cezimbra.goatcounter.com/count async src=//gc.zgo.at/count.js></script></body></html>